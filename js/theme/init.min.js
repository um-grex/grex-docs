import{addElementToModal,closeModals,displayModal,getFirstAncestorByClass,isPreCopyToEnable,waitForScroll}from"./modules/helpers.min.js";import{resizeFunctionsList,shortcutsKeys}from"./modules/const.min.js";document.addEventListener("DOMContentLoaded",function(){let n=[];document.addEventListener("keyup",function(e){const t=n.indexOf(e.key);t>-1&&n.splice(t,1)}),document.addEventListener("keydown",function(e){if(e.target===document.body){e.key!==n[n.length-1]&&n.push(e.key);for(const t in shortcutsKeys)shortcutsKeys[t].keys&&shortcutsKeys[t].keys.every((e,t)=>new Intl.Collator([],{usage:"search",sensitivity:"base"}).compare(e,n[t])===0)&&typeof window[shortcutsKeys[t].function]=="function"&&(e.preventDefault(),window[shortcutsKeys[t].function]())}}),document.addEventListener("click",function(e){e.target.classList.contains("modal-container")&&closeModals(e.target)});let i=document.getElementsByTagName("pre");for(let e=0;e<i.length;e++)if(isPreCopyToEnable(i[e])){let t=document.createElement("div"),n=document.createElement("i");if(t.setAttribute("class","copy-code is-action-button"),n.setAttribute("class","fa-solid fa-copy"),typeof codeCopyBefore!="undefined"&&typeof codeCopyAfter!="undefined"&&(t.setAttribute("title",codeCopyBefore),t.setAttribute("title-after",codeCopyAfter)),!getFirstAncestorByClass(i[e],"highlight")){let t=i[e],n=document.createElement("div");n.classList.add("highlight"),t.parentNode.replaceChild(n,t),n.appendChild(t)}i[e].appendChild(t),t.appendChild(n),t.addEventListener("click",function(){const t=this.parentElement.getBoundingClientRect().width,n=this.getBoundingClientRect().width;this.style.maxWidth=t-n+"px",navigator.clipboard.writeText(this.previousElementSibling.textContent)})}let a=document.querySelectorAll("#content img");for(let e=0;e<a.length;e++)a[e].parentNode.tagName!=="A"&&(a[e].classList.toggle("is-modal",!0),a[e].addEventListener("click",function(){let t=document.createElement("img");t.src=this.src,addElementToModal(t),displayModal()}));let s=document.getElementsByClassName("tabs-trigger");for(let e=0;e<s.length;e++)s[e].addEventListener("click",function(){for(let e=0;e<s.length;e++)this===s[e]?s[e].classList.toggle("is-active",!0):s[e].classList.toggle("is-active",!1);let t=document.getElementsByClassName("tabs-results-list");for(let e=0;e<t.length;e++)this.id+"-results"===t[e].id?t[e].classList.toggle("is-active",!0):t[e].classList.toggle("is-active",!1)});function l(){const n=o.getBoundingClientRect().top;let t=m(n);for(let n=0;n<e.length;n++)n<t?h(e[n]):n===t?u(e[n]):d(e[n])}let m=function(t){let n=-1;for(let s=0;s<e.length;s++){const o=document.getElementById(e[s].getAttribute("href").substring(1)).getBoundingClientRect().top;Math.floor(o-t)<=0&&(n=s)}return n};function h(e){e.classList.toggle("is-past",!0),e.classList.toggle("is-current",!1)}function u(e){e.classList.toggle("is-past",!1),e.classList.toggle("is-current",!0)}function d(e){e.classList.toggle("is-past",!1),e.classList.toggle("is-current",!1)}let c=!1,t=!1,o=document.getElementById("contentContainer"),e=document.querySelectorAll("#TableOfContents a");for(let n=0;n<e.length;n++)e[n].addEventListener("click",function(){t=!0,waitForScroll(o,100,100).then(e=>{if(e)l(),t=!1;else return Promise.reject("Cannot reach end of scroll")}).catch(e=>{console.error("Error managing click event for "+this+": "+e),t=!1})});function f(){o.scrollTop>0?r.classList.toggle("is-active",!0):r.classList.toggle("is-active",!1)}let r=document.getElementById("tocBackToTop");r&&r.addEventListener("click",function(){o.scrollTop=0,t=!0,waitForScroll(o,100,100).then(e=>{if(e)l(),t=!1;else return Promise.reject("Cannot reach end of scroll")}).catch(e=>{console.error("Error managing click event for "+this+": "+e),t=!1})}),o.addEventListener("scroll",function(){c||(window.requestAnimationFrame(function(){t||l(),f(),c=!1}),c=!0)})});let scrollResize=!1;window.addEventListener("resize",function(){scrollResize||(window.requestAnimationFrame(function(){for(let e=0;e<resizeFunctionsList.length;e++)resizeFunctionsList[e]();scrollResize=!1}),scrollResize=!0)})