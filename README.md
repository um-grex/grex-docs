# Repository for the Sources for a Grex documentation website

## Introduction

The idea is to have a completely static website that is portable and can be hosted anywhere without overhead and risks of maintaing secure LAMP stack. It is also good that the content would be living in plain text files like dokuwiki. At the same time, we'd want to have an easy to use CMS with something like Markdown syntax (and without the need to learn any web tools like Jekyll). 

The Hugo [https://gohugo.io] satisfies our needs. Shadocs theme seems to be the way to do documentation websites. 

Conventions:

* To be able to host it on an existing website without interfering with the existing frontpage, __content__ is the site's root path for the content.
* Generally, conventions live in _config.toml_. We have for now opted for autogenerating the content menu rather than using static one. 
* Because content is autogenerated, it should be simple to add pages by dropping new something.md with a proper header (with Weight set; see the example site pages).
* Images, PDFs, PPTs, ... etc. go to the _/static_. 

## Web Developing with Hugo

The Hugo version to work with is the latest stable, extended.

1. Get the Hugo binary (extended) from https://github.com/gohugoio/hugo/releases, then unpack and place it in your `PATH`
2. Clone this repository to get the currently used Hugo theme: `git clone https://github.com/um-grex/grex-docs.git`
3. Change to the repository and render it with Hugo: `hugo server -w --disableFastRender`
4. Using a browser navigate to http://127.0.0.1:1313 (as directed by hugo) and observe the rendered website
5. Deploy the site to GitHub CI: `git push origin main`

Submodules can be updated somehow when the theme updates. 
The page sources are in Markdown and thus can be edited directly in the Github editor. 
It is a good practice to pull and render the website with local Hugo process, because Hugo's Golang modules and shorthands are a superset of the Git's markdown syntax, and not all of them are rendered on the github repository pages.

## Git

Use the `develop` branch to make changes and test them locally.

Changes to the `develop` branch can be safely pushed to be shared with other team members, as they will not be deployed to the production website.

When ready, merge the `develop` branch into the `main` branch and push it to deploy the documentation to the production website.

For example:
```bash
[~]$ git clone https://github.com/um-grex/grex-docs.git --recursive  # if clean doc copy is needed
[~]$ git pull  # if the repo is already cloned
[~]$ git switch develop
# change/update the documentation files; render them locally with Hugo server as described above. 
# Then, commit the changes to the Github
[~]$ git commit
[~]$ git push
# other team members can pull/check the changes locally
# when changes are approved
[~]$ git switch main
[~]$ git merge develop
[~]$ git push
# production website is updated
```

It could happen that the `main` branch becomes ahead of `develop`. To fix this, simply switch to the `develop` branch and merge `main`:
```bash
[~]$ git switch develop
[~]$ git merge main
```

## Markdown

https://learnxinyminutes.com/docs/markdown/ 

Conventions for writing the documentation pages we know of.

 * command line commands should be on a separate line, and quoted with ```triple backticks```
 * code, job scripts and such should use highlight shortcode for the appropriate language (like, bash)
 * etc.? How do we highlight things like partition names and environment vars, with Bold ?

