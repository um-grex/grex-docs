<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Using JuPyTer Notebooks"><meta property="og:title" content="Using JuPyTer Notebooks"><meta property="og:description" content="JuPyTer on Grex JuPyTer is a Web-interface aimed to support interactive data science and scientific computing. Jupyter supports several dynamic languages, most notably Python, R and Julia. Jupyter offers a metaphor of &ldquo;computational document&rdquo; that combines code, data and visualizations, and can be published or shared with collaborators.
Jupyter can be used either as a simple, individual notebook or as a multi-user Webserver/Interactive Development Environment (IDE), such as JupyterHub/JupyterLab. The JupyterHub servers can use a variety of computational back-end configurations: from free-for-all shared workstation to job spawning interfaces to HPC schedulers like SLURM or container workflow systems like Kubernetes."><meta property="og:type" content="article"><meta property="og:url" content="http://um-grex.github.io/grex-docs/docs/grex/software/jupyter-notebook/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2022-01-28T11:18:58-06:00"><title>Using JuPyTer Notebooks | Unofficial Grex User Guide</title><link rel=icon href=/grex-docs/favicon.png type=image/x-icon><link rel=stylesheet href=/grex-docs/book.min.9e24c4795dd4fdd0e504b497cfd7198ef04d9fc59147fe183e68ca7912ee2901.css integrity="sha256-niTEeV3U/dDlBLSXz9cZjvBNn8WRR/4YPmjKeRLuKQE="><script defer src=/grex-docs/en.search.min.382709aded9252b005216cee4fdf4a1a0b0c63e9c9cd7befb585407b29e85d5a.js integrity="sha256-OCcJre2SUrAFIWzuT99KGgsMY+nJzXvvtYVAeynoXVo="></script></head><body><input type=checkbox class=hidden id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav><h2 class=book-brand><a href=http://um-grex.github.io/grex-docs><img src=/grex-docs/um_logo_email_signature.png alt=Logo><span>Unofficial Grex User Guide</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64><div class="book-search-spinner spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><a href=/grex-docs/docs/longread/>Notes of Grex Changes</a><ul><li class=book-section-flat><a href=/grex-docs/docs/longread/training/>Training Materials and Presentations</a><ul></ul></li></ul></li><li class=book-section-flat><a href=/grex-docs/docs/computecanada/>Accessing Compute Canada resources</a><ul></ul></li><li class=book-section-flat><a href=/grex-docs/docs/grex/>Grex HPC QuickStart</a><ul><li><a href=/grex-docs/docs/grex/access/>Access and Usage conditions</a></li><li><a href=/grex-docs/docs/grex/connecting/>Connecting / Transferring data</a></li><li><a href=/grex-docs/docs/grex/data/>Storage and Data</a></li><li><a href=/grex-docs/docs/grex/running/>Running Jobs</a></li><li><a href=/grex-docs/docs/grex/ood/>Grex's OpenOnDemand Web Portal</a></li><li><a href=/grex-docs/docs/grex/software/>Software</a><ul><li><a href=/grex-docs/docs/grex/software/cern-vmfs/>CVMFS and ComputeCanada</a></li><li><a href=/grex-docs/docs/grex/software/general-linux/>General Linux tools</a></li><li><a href=/grex-docs/docs/grex/software/containers/>Containers for Software</a></li><li><a href=/grex-docs/docs/grex/software/code-development/>Code Development on Grex</a></li><li><a href=/grex-docs/docs/grex/software/jupyter-notebook/ class=active>Using JuPyTer Notebooks</a></li><li><span>Software-specific notes</span><ul><li><a href=/grex-docs/docs/grex/software/specific/gaussian/>Gaussian</a></li><li><a href=/grex-docs/docs/grex/software/specific/julia/>Julia</a></li><li><a href=/grex-docs/docs/grex/software/specific/matlab/>Matlab</a></li><li><a href=/grex-docs/docs/grex/software/specific/nwchem/>Nwchem</a></li><li><a href=/grex-docs/docs/grex/software/specific/orca/>Orca</a></li><li><a href=/grex-docs/docs/grex/software/specific/priroda/>Priroda</a></li><li><a href=/grex-docs/docs/grex/software/specific/vasp/>Vasp</a></li></ul></li></ul></li></ul></li><li><a href=/grex-docs/docs/faq/>Frequently Asked Questions</a></li><li><a href=/grex-docs/docs/localit/>Local IT Resources</a></li><li><a href=/grex-docs/docs/support-contacts/>Support and Training</a></li><li><a href=/grex-docs/docs/disclaimer/>Disclaimer</a></li></ul></nav><script>(function(){var a=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></aside><div class=book-page><header class="flex align-center justify-between book-header"><label for=menu-control><img src=/grex-docs/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Using JuPyTer Notebooks</strong></header><article class=markdown><h1 id=jupyter-on-grex>JuPyTer on Grex</h1><p><a href=https://jupyter.org/>JuPyTer</a> is a Web-interface aimed to support interactive data science and scientific computing.
Jupyter supports several dynamic languages, most notably Python, R and Julia.
Jupyter offers a metaphor of &ldquo;computational document&rdquo; that combines code, data and visualizations, and can be published or shared with collaborators.</p><p>Jupyter can be used either as a simple, individual notebook or as a multi-user Webserver/Interactive Development Environment (IDE), such as JupyterHub/JupyterLab.
The JupyterHub servers can use a variety of computational back-end configurations: from free-for-all shared
workstation to job spawning interfaces to HPC schedulers like SLURM or container workflow systems like Kubernetes.</p><p>This page lists examples of several ways of accessing Jupyter.</p><h2 id=using-notebooks-via-ssh-tunnel-and-interactive-jobs>Using Notebooks via SSH tunnel and interactive jobs</h2><p>Any Python installation that has Jupyter notebooks installed can be used for the simple notebook interface.
Most often, activity on login nodes of HPC systems is limited, so first an interactive batch job should be started.
Then, in the interactive job, users would start jupyter notebook server and use SSH tunnel to connect to it from a local Web browser.</p><div class=book-expand><label><div class="book-expand-head flex justify-between"><span>Details and Example for Grex</span>
<span>â†•</span></div><input type=checkbox class=hidden><div class="book-expand-content markdown-inner"><p>After loggin on to Grex as usual, issue the following <em>salloc</em> command to start an interactive job:</p><p><code>salloc --partition=compute --nodes=1 --ntasks-per-node=2 --time=0-3:00:00</code></p><p>It should give you a command prompt on a compute node. (change parameters like <em>partition</em>, <em>time</em> etc. to your needs).<br>Then, assung a Python module is loaded and Jupyter is installed, either in the Python or in a virtualenv,
lets start a Notebook server, using an arbitrary port 8765. If the port is already in use, pick another number.</p><p><code>jupyter-notebook --ip 0.0.0.0 --no-browser --port 8765</code></p><p>If succesfull, there should be <em>http://g333:8675/?token=ae348acfa68edec1001bcef58c9abb402e5c7dd2d8c0a0c9</em> or similar,
where g333 is a compute node it runs, 8675 is a local TCP port and token is an access token. Now we have Jupyter notebook
server running on the node, but how do we access it from our own browser? To that end, we will need an SSH tunnel.</p><p>Assuming a command line SSH client (OpenSSH or MobaXterm command line window), in a new tab or terminal issue the following:</p><p><code>ssh -fNL 8765:g333:8765 youruser@bison.westgrid.ca</code></p><p>Agan, g333, port 8765 and your user name in the example above should be changed to reflect the actual node and user!
When succesfull, the SSH command above returns nothing. Keep the terminal window open for as long as you need the tunnel.
Now, the final step is to point your browser (Firefox is the best as Chrome might refuse to do plain http://) to the
specified port on <em>localhost</em> or 127.0.0.1, as in <em>http://localhost:8765</em> or <em>http://127.0.0.1:8765</em> . Use the token as per above to
authenticate into the Jupyter notebook session, either copying it into the prompt or providing in the browser address line.</p></div></label></div><p>The notebook session will be usable for as long as the interactive (<em>salloc</em>) job is valid and both salloc session and the SSH
tunnel connections stay alive. This usually is a limitation on for how long Jupyter notebook calculations can be, in practice.</p><p>The above mentioned method will work not only on Grex, but on ComputeCanada systems as well.</p><h2 id=using-notebooks-via-grex-ood-web-portal>Using Notebooks via Grex OOD Web Portal</h2><p>Grex provides Jupyter server as OnDemand Dashboard application. This is much more convenient than handling SSH tunnels manually.
The servers will run as a batch job on Grex compute nodes, so as usual, a choice of SLURM partition will be needed.</p><p>Presently, Jupyter for these apps uses an installation of Grex&rsquo;s Python 3.7 module. There are two versions of the app,
one for the GCC 7.4 toolchain , another for Intel the 2019.5 toolchain.</p><p>Find out more on how to use OOD on the <a href=../../ood>Grex OOD pages</a></p><p>To use R, Julia, and different instances or versions of Pyton, a Jupyter Notebook kernel needs to be installed by each user
in their home directories. Check out the corresponding ComputeCanada documentation <a href=https://docs.computecanada.ca/wiki/JupyterNotebook#Adding_kernels>here</a> .</p><h2 id=other-jupyter-instances-around>Other JuPyTer instances around</h2><p>There is SyZyGy instance <a href=https://umanitoba.syzygy.ca>umanitoba.syzygy.ca</a> that gives a free-for-all shared JupyterHub for Umanitoba users.</p><p>Most of the ComputeCanada HPC machines deployed JupyterHub as a job (Beluga, Cedar) or as a free-for-all shared server (Niagara).</p></article><div class="book-footer justify-between"><div><a class="flex align-center" href=https://github.com/um-grex/grex-docs/commit/1ae41e033941294373439566c1c988bcd72fe00c title="Last modified by Shamov | Jan 28, 2022" target=_blank><img src=/grex-docs/svg/calendar.svg class=book-icon alt=Calendar>
<span>Jan 28, 2022</span></a></div><div><a class="flex align-center" href=https://github.com/um-grex/grex-docs/blob/master/content/docs/grex/software/jupyter-notebook.md target=_blank><img src=/grex-docs/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div></div><aside class="book-toc levels-4 fixed"><nav id=TableOfContents><ul><li><a href=#jupyter-on-grex>JuPyTer on Grex</a><ul><li><a href=#using-notebooks-via-ssh-tunnel-and-interactive-jobs>Using Notebooks via SSH tunnel and interactive jobs</a></li><li><a href=#using-notebooks-via-grex-ood-web-portal>Using Notebooks via Grex OOD Web Portal</a></li><li><a href=#other-jupyter-instances-around>Other JuPyTer instances around</a></li></ul></li></ul></nav></aside></main></body></html>