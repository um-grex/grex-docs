<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Software"><meta property="og:title" content><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="http://um-grex.github.io/grex-docs/docs/grex/software/"><title>Software | Unofficial Grex User Guide</title><link rel=icon href=/grex-docs/favicon.png type=image/x-icon><link rel=stylesheet href=/grex-docs/book.min.9e24c4795dd4fdd0e504b497cfd7198ef04d9fc59147fe183e68ca7912ee2901.css integrity="sha256-niTEeV3U/dDlBLSXz9cZjvBNn8WRR/4YPmjKeRLuKQE="><script defer src=/grex-docs/en.search.min.3204198ac68ff813f5bc71864b534e690dc2363a3e2593ee3dcd656ebef9922b.js integrity="sha256-MgQZisaP+BP1vHGGS1NOaQ3CNjo+JZPuPc1lbr75kis="></script><link rel=alternate type=application/rss+xml href=http://um-grex.github.io/grex-docs/docs/grex/software/index.xml title="Unofficial Grex User Guide"></head><body><input type=checkbox class=hidden id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav><h2 class=book-brand><a href=http://um-grex.github.io/grex-docs><img src=/grex-docs/um_logo_email_signature.png alt=Logo><span>Unofficial Grex User Guide</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64><div class="book-search-spinner spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><a href=/grex-docs/docs/longread/>Notes of Grex Changes</a><ul><li class=book-section-flat><a href=/grex-docs/docs/longread/training/>Training Materials and Presentations</a><ul></ul></li></ul></li><li class=book-section-flat><a href=/grex-docs/docs/computecanada/>Accessing Compute Canada resources</a><ul></ul></li><li class=book-section-flat><a href=/grex-docs/docs/grex/>Grex HPC Documentation</a><ul><li><a href=/grex-docs/docs/grex/access/>Access and Usage conditions</a></li><li><a href=/grex-docs/docs/grex/connecting/>Connecting / Transferring data</a></li><li><a href=/grex-docs/docs/grex/data/>Storage and Data</a></li><li><a href=/grex-docs/docs/grex/running/>Running Jobs</a></li><li><a href=/grex-docs/docs/grex/software/ class=active>Software</a><ul><li><a href=/grex-docs/docs/grex/software/cern-vmfs/>CVMFS and ComputeCanada</a></li><li><a href=/grex-docs/docs/grex/software/general-linux/>General Linux tools</a></li><li><a href=/grex-docs/docs/grex/software/containers/>Containers for Software</a></li><li><a href=/grex-docs/docs/grex/software/code-development/>Code Development on Grex</a></li><li><span>Software-specific notes</span><ul><li><a href=/grex-docs/docs/grex/software/specific/gaussian/>Gaussian</a></li><li><a href=/grex-docs/docs/grex/software/specific/julia/>Julia</a></li><li><a href=/grex-docs/docs/grex/software/specific/matlab/>Matlab</a></li><li><a href=/grex-docs/docs/grex/software/specific/nwchem/>Nwchem</a></li><li><a href=/grex-docs/docs/grex/software/specific/orca/>Orca</a></li><li><a href=/grex-docs/docs/grex/software/specific/priroda/>Priroda</a></li><li><a href=/grex-docs/docs/grex/software/specific/vasp/>Vasp</a></li></ul></li></ul></li></ul></li><li><a href=/grex-docs/docs/faq/>Frequently Asked Questions</a></li><li><a href=/grex-docs/docs/localit/>Local IT Resources</a></li><li><a href=/grex-docs/docs/support-contacts/>Support and Training</a></li><li><a href=/grex-docs/docs/disclaimer/>Disclaimer</a></li></ul></nav><script>(function(){var a=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></aside><div class=book-page><header class="flex align-center justify-between book-header"><label for=menu-control><img src=/grex-docs/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Software</strong></header><article class=markdown><h1 id=software>Software</h1><p>In HPC world, software is more often meant as codes that do some scientific or engineering computation, data processing and visualiation (as opposed to web services, relational databases, client-server businness systems, email and office, &mldr; etc.).</p><p>Tools and libraries used to develop HPC software are also software, and have several best practices associated with them. Some of that will be covered below. Without means to provide software to do computations, HPC systems would be rather useless.</p><p>Fortunately most HPC systems, and Grex is no exception, come with a pre-installed, curated software stack. This section covers how to find the installed software, how to access it, and what options you have if some of the software you need is missing.</p><h2 id=how-software-is-installed-and-distributed>How software is installed and distributed</h2><p>There are several mechanisms of software installation under Linux. One of them is using Linux software package manager (<em>apt</em> on Ubuntu, <em>yum</em> on Centos, etc) and a binary package repository provided by some third party. These package managers would install a version of the code system wide, into standard OS directories like <em>/usr/bin</em> where it would be immediately available in the systems PATH (PATH is a variable that specifies where the operating systems would look for executable code).</p><p>This method of installation is often practiced on person&rsquo;s own workstations, because it requires no knowledge other than syntax of the OS package manager. There are however significant drawbacks to it for using on HPC clusters that consists of many compute nodes and are shared by many users.</p><ul><li><p>Need of root access to install in the base OS is a systems stability and security threat, and has a potential of users interfering with each other.</p></li><li><p>Package managers as a rule do not keep several versions of the same package; they are geared towards having only the newest one (as in &ldquo;software update&rdquo;), which poses a problem for reproducible research.</p></li><li><p>A package should be installed across all the nodes of the cluster; thus the installations should be somehow managed.</p></li><li><p>Binary packages in public repos tend to be compiled for generic CPU architectures rather than optimized for a particular system.</p></li></ul><p>Thus in HPC world, as a rule, only a minimal set of core Linux OS packages is installed by system administrators, and no access to package managers is given to the end users. There are ways to let users have their own Linux OS images through virtualization and containerization technolgies (see the Containers section) when it is really necessary.</p><p>On most of the HPC machines, the application software is recompiled from sources and installed into a shared filesystem so that each compute node has access to the same code. Multiple versions of a software package can be installed into each own PATH; dependencies between software (such as libraries from one package needed to be accessed by another package) are tracked via a special software called Environmental Modules.</p><p>The Modules package would manipulate the PATH (and other systems environment variables like <strong>LD_LIBRARY_PATH</strong>, <strong>CPATH</strong> and application-specific ones like <strong>MKLROOT</strong>, <strong>HDF5_HOME</strong>) on user request, &ldquo;loading&rdquo; and &ldquo;unloading&rdquo; specified software items.</p><p>The two most popular Modules are the original <a href=http://modules.sourceforge.net/>Tcl Modules</a> and its <a href=https://lmod.readthedocs.io/en/latest/>Lmod</a> rewrite in Lua at <a href=https://www.tacc.utexas.edu/research-development/tacc-projects/lmod>TACC</a>. On the new Grex, <strong>Lmod</strong> is used.</p><h2 id=lmod>Lmod</h2><p>The main feature of Lmod is hierarchical module system to provide a better control of software dependencies. Modules for software items that depend on a particular core modules (toolchains: a compiler suite, a MPI library) are only accessible after the core modules are loaded. This prevents situations where conflicts appear when software items built with different toolchains are loaded simultaneously. Lmod will also automatically unload conflicting modules and reload their dependencies should toolchain change. Finally, by manipulating module root paths, it is possible to provide more than one software stack per HPC system. For more information, please refer the software stacks available on Grex.</p><h2 id=how-to-find-the-software-with-lmod-modules>How to find the software with Lmod Modules</h2><p>A &ldquo;software stack&rdquo; module should be loaded first. On Grex, there are two software stack, called GrexEnv and CCEnv, and standing for the sofware
built on Grex locally and the software envornment from ComputeCanada, correspondingly. GrexEnv is the only module loaded by default.</p><p>When a software stack module is loaded, the <strong>module spider</strong> command will find a specific software item (for example, GAMESS; note that
all the module names are lower-case on Grex and on ComputeCanada stacks) if it exist under that stack:</p><p><code>module spider gamess</code></p><p>It might return several versions; then usually a subsequent command with the version is
used to determine dependencies required for the software. In case of GAMESS on Grex:</p><p><code>module spider gamess/Sept2019</code></p><p>It will advise to load the following modules: <em>&ldquo;intel/15.0.5.223 impi/5.1.1.109&rdquo;</em>.
Then, **module load ** command can be used actually load the GAMESS environment (note that the dependencies must be loaded first:</p><p><code>module load intel/15.0.5.223 impi/5.1.1.109</code></p><p><code>module load gamess/Sept2019</code></p><p>For more information about using Lmod modules, please refer to Compute Canada documentation about <a href=https://docs.computecanada.ca/wiki/Utiliser_des_modules/en>Using Modules</a> and <a href=https://lmod.readthedocs.io/en/latest/010_user.html>Lmod User Guide</a>.</p><h2 id=how-and-when-to-install-software-in-your-home-directory>How and when to install software in your HOME directory</h2><p>Linux (Unlike some Desktop operatinhg systems) has a concept of user permissions separation. Regular users cannot, unless explicitly permitted, access systems files and files of other users.</p><p>You can almost always install software without <strong>super-user</strong> access into your /home/$USER directory. Moreover, you can manage the software with Lmod: Lmod automatically searches for module files under <em>$HOME/modulefiles</em> and adds the modules it discovers there into the modules tree so they can be found by <em>module spider</em>, loaded by <em>module load</em>, etc.</p><p>Most Linux software can be installed from sources using either <a href=https://www.gnu.org/software/autoconf/>Autoconf</a> or <a href=https://cmake.org/>CMake</a> configuration tools. These will accept <em>&ndash;prefix=/home/$USER/my-sofware-version</em> or <em>-DCMAKE_INSTALL_PREFIX=/home/$USER/my-software</em> version.</p><p>Software that come as binary archive to be unpacked can be simply unpacked into your home directory location. Then, the paths should be set for the sofware to be found: either by including the environment variable in <em>$HOME/.bashrc</em> or by creating a specific module in <em>$HOME/modulefiles/my-software/version</em> following Lmod instructions for <a href=https://lmod.readthedocs.io/en/latest/015_writing_modules.html>writing Modules</a>.</p><p>There exist binary software environments like Conda that manage their own tree of binary-everything. These can be used as well, with some caution, because automatically pulling everything might conflict with the same software existing in the HPC environment (Python package paths, MPI libraries, etc.).</p><p>However, if a software is really a part of the base OS (something like a graphics Desktop software, etc.), it can be hard to rebuild from sources due to many dependencies. If needed, it may be better if installed centrally or used in a container (see Containers documentation).</p></article><div class="book-footer justify-between"><div><a class="flex align-center" href=https://github.com/um-grex/grex-docs/commit/f42cd442db68ea019509b0aa26c742457dd13f71 title="Last modified by Shamov | Jun 29, 2021" target=_blank><img src=/grex-docs/svg/calendar.svg class=book-icon alt=Calendar>
<span>Jun 29, 2021</span></a></div><div><a class="flex align-center" href=https://github.com/um-grex/grex-docs/blob/master/content/docs/grex/software/_index.md target=_blank><img src=/grex-docs/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div></div><aside class="book-toc levels-4 fixed"><nav id=TableOfContents><ul><li><a href=#software>Software</a><ul><li><a href=#how-software-is-installed-and-distributed>How software is installed and distributed</a></li><li><a href=#lmod>Lmod</a></li><li><a href=#how-to-find-the-software-with-lmod-modules>How to find the software with Lmod Modules</a></li><li><a href=#how-and-when-to-install-software-in-your-home-directory>How and when to install software in your HOME directory</a></li></ul></li></ul></nav></aside></main></body></html>