<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Data Sizes and Quota"><meta property="og:title" content><meta property="og:description" content="Data sizes and quotas This section explains how to find the actual space and inode usage of your /home/ and /global/scratch allocations on Grex. We limit the size of the data and the number of files that can be stored on these filesystems. To figure out where your current usage stands with the limit, POSIX quota or Lustres' analog, lfs quota commands can be used.
NFS quota The /home/ filesystem is served by NFSv1 and thus supports the standard POSIX quota command."><meta property="og:type" content="article"><meta property="og:url" content="http://um-grex.github.io/grex-docs/docs/grex/data/data-sizes-and-quota/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2022-02-24T18:02:57-06:00"><title>Data Sizes and Quota | Unofficial Grex User Guide</title><link rel=icon href=/grex-docs/favicon.png type=image/x-icon><link rel=stylesheet href=/grex-docs/book.min.06cbd313f49ddc884804421299d5dc11b1cd097fdcfed7f054a79a137890a2d7.css integrity="sha256-BsvTE/Sd3IhIBEISmdXcEbHNCX/c/tfwVKeaE3iQotc="><script defer src=/grex-docs/en.search.min.59cfcd0491856c47e7cdadca2a6c4bb21921156865f785c5aefb79b2bfed2afd.js integrity="sha256-Wc/NBJGFbEfnza3KKmxLshkhFWhl94XFrvt5sr/tKv0="></script></head><body><input type=checkbox class=hidden id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav><style>hr{border:0;height:3px;background-image:linear-gradient(to right,transparent,#095484,transparent)}</style><h2 class=book-brand><a href=http://um-grex.github.io/grex-docs><img src=/grex-docs/logo/um_logo_email_signature.png style=width:auto;height:auto alt=Logo><br><hr><span>Unofficial Grex User Guide</span><hr></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64><div class="book-search-spinner spinner hidden"></div><ul id=book-search-results></ul></div><hr><ul><li class=book-section-flat><a href=/grex-docs/docs/longread/>Notes of Grex Changes</a><ul><li class=book-section-flat><a href=/grex-docs/docs/longread/training/>Training Materials and Presentations</a><ul></ul></li></ul></li><li class=book-section-flat><a href=/grex-docs/docs/computecanada/>Accessing Compute Canada resources</a><ul></ul></li><li class=book-section-flat><a href=/grex-docs/docs/grex/>Grex HPC QuickStart</a><ul><li><a href=/grex-docs/docs/grex/access/>Access and Usage conditions</a></li><li><a href=/grex-docs/docs/grex/connecting/>Connecting / Transferring data</a></li><li><a href=/grex-docs/docs/grex/data/>Storage and Data</a><ul><li><a href=/grex-docs/docs/grex/data/data-sharing/>Data Sharing</a></li><li><a href=/grex-docs/docs/grex/data/data-sizes-and-quota/ class=active>Data Sizes and Quota</a></li></ul></li><li><a href=/grex-docs/docs/grex/running/>Running Jobs</a></li><li><a href=/grex-docs/docs/grex/ood/>Grex's OpenOnDemand Web Portal</a></li><li><a href=/grex-docs/docs/grex/software/>Software</a></li></ul></li><li><a href=/grex-docs/docs/faq/>Frequently Asked Questions</a></li><li><a href=/grex-docs/docs/localit/>Local IT Resources</a></li><li><a href=/grex-docs/docs/support-contacts/>Support and Training</a></li><li><a href=/grex-docs/docs/disclaimer/>Disclaimer</a></li></ul></nav><script>(function(){var a=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></aside><div class=book-page><article class=markdown><h1 id=data-sizes-and-quotas>Data sizes and quotas</h1><p>This section explains how to find the actual space and inode usage of your <strong>/home/</strong> and <strong>/global/scratch</strong> allocations on Grex. We limit the size of the data and the number of files that can be stored on these filesystems. To figure out where your current usage stands with the limit, POSIX <strong>quota</strong> or Lustres' analog, <strong>lfs quota</strong> commands can be used.</p><h2 id=nfs-quota>NFS quota</h2><p>The <strong>/home/</strong> filesystem is served by NFSv1 and thus supports the standard POSIX <strong>quota</strong> command. For the current user, it is just:</p><blockquote class="book-hint info">quota</blockquote><p>or</p><blockquote class="book-hint info">quota -s</blockquote><p>The command will result in something like this (note the <strong>-s</strong> flag added to make units human readable:</p><blockquote class="book-hint info"><pre><code>[someuser@grex ~]$ quota -s
  Disk quotas for user auser (uid 12345):
  Filesystem   space   quota   limit   grace   files   quota   limit   grace
  192.168.0.1:/exports/home/home
                     4G   30G   33G             131k    500k   550k
</code></pre></blockquote><p>The output is a self explanatory table. There are two values: <strong>soft</strong> &ldquo;quota&rdquo; and <strong>hard</strong> &ldquo;limit&rdquo; per each of (space, files). If you are over soft quota, the value of used resource (space or files) will have a star <strong>*</strong> to it, and <strong>grace</strong> countdown will be shown. Getting over grace period, or over the hard limit prevents you from writing new data or creating new file on the filesystem. If you are over quota on <strong>/home</strong>, it is time to do some clean up there, or migrate the data-heavy items to <strong>/global/scratch</strong> where they belong.</p><p><strong>CAVEAT:</strong> Compute Canada breaks the POSIX standard by redefining the quota command in their software stack. So after loading the <strong>CCEnv</strong> module on Grex, the quota command may return garbage. For accurate output about your quota, load <strong>GrexEnv</strong> first before running the command <strong>quota</strong> or use the command <strong>diskusage_report</strong> (see below).</p><h2 id=lustre-quota>Lustre quota</h2><p>The <strong>/global/scratch/</strong> filesystem is actually a link to a (new) Lustre filesystem called <strong>/sbb/</strong>. We have retained the old name for compatibility with the old Lustre filesystem that was used on Grex between 2011 and 2017. Lustre filesystem provides a <strong>lfs quota</strong> sub-command that requires the name of the filesystem specified. So for the current user, the command to get current usage {space and number of files}, in the human-readable units, would be as follows:</p><blockquote class="book-hint info">lfs quota -h -u $USER /sbb</blockquote><p>With the output:</p><blockquote class="book-hint info"><pre><code>[someuser@bison ~]$ lfs quota -h -u $USER /sbb
 Disk quotas for usr auser (uid 12345):
 Filesystem    used   quota   limit   grace   files   quota   limit   grace
      /sbb    622G  2.644T  3.653T       - 5070447  6000000 7000000       -
</code></pre></blockquote><p>Presently we do not enforce group <em>or project</em> quota on Grex.</p><p>If you are over quota on Lustre <strong>/global/scratch</strong> filesystem, just like for NFS, there will be a star to the value exceeding the limit, and the grace countdown will be active.</p><p>To make it easier, we have set a custom script with the same name as for Compute Canada clusters, <strong>diskusage_report</strong>, that gives both <strong>/home</strong> and <strong>/global/scratch</strong> quotas (space and number of files: usage/quota or limits), as in the following example:</p><blockquote class="book-hint info"><pre><code>[someuser@bison ~]$  diskusage_report 
                Description (FS)        Space (U/Q)   # of files (U/Q)
                /home (someuser)          254M/104G          4953/500k
      /global/scratch (someuser)         131G/2147G         992k/1000k
</code></pre></blockquote><p>for more details, run the command:<blockquote class="book-hint info"><pre><code>diskusage_report -dd -vv
</code></pre></blockquote></p><p>as in the example:<blockquote class="book-hint info"><pre><code>[someuser@bison ~]$ diskusage_report -dd -vv
+ Space and Inode quotas for user: someuser
+ Date: Thu Feb 24, 2022
              Description (FS)          Space (U/Q/L)    # of files(U/Q/L)
                /home (someuser)       254M/104G/110G      4953/500k/1000k
      /global/scratch (someuser)     131G/2147G/3221G     992k/1000k/1100k
FS ==&gt; File System (/home; /global/scratch)
U  ==&gt; Current Usage (Space, Inode)        
Q  ==&gt; Soft Quota (Space, Inode)           
L  ==&gt; Hard Quota (Space, Inode)    
</code></pre></blockquote></p></article><div class="book-footer justify-between"><div><a class="flex align-center" href=https://github.com/um-grex/grex-docs/commit/ef73e2b402b387d39ae8ec9097eab1371bbf0f16 title="Last modified by Dr. Ali Kerrache | Feb 25, 2022" target=_blank><img src=/grex-docs/svg/calendar.svg class=book-icon alt=Calendar>
<span>Feb 25, 2022</span></a></div><div><a class="flex align-center" href=https://github.com/um-grex/grex-docs/blob/master/content/docs/grex/data/data-sizes-and-quota.md target=_blank><img src=/grex-docs/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><br><hr></div><aside class="book-toc levels-4 fixed"><nav id=TableOfContents><ul><li><a href=#data-sizes-and-quotas>Data sizes and quotas</a><ul><li><a href=#nfs-quota>NFS quota</a></li><li><a href=#lustre-quota>Lustre quota</a></li></ul></li></ul></nav></aside></main></body></html>