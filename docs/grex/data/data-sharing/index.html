<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Data Sharing"><meta property="og:title" content><meta property="og:description" content="Data sharing Sharing of accounts login information (like passwords or SSH keys) is stricty forbidden on Grex, as well as on most of the HPC systems. There is a mechanism of data/file sharing that does not require sharing of the accounts. To access each others' data on Grex, the UNIX groups and permissions mechanism can be used as explined below.
UNIX groups Each UNIX (or Linux) file or directory is owned by an individual user and also by a group (which may be comprised of several users)."><meta property="og:type" content="article"><meta property="og:url" content="http://um-grex.github.io/grex-docs/docs/grex/data/data-sharing/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2022-06-20T11:27:05-05:00"><title>Data Sharing | Unofficial Grex User Guide</title><link rel=icon href=/grex-docs/favicon.png type=image/x-icon><link rel=stylesheet href=/grex-docs/book.min.06cbd313f49ddc884804421299d5dc11b1cd097fdcfed7f054a79a137890a2d7.css integrity="sha256-BsvTE/Sd3IhIBEISmdXcEbHNCX/c/tfwVKeaE3iQotc="><script defer src=/grex-docs/en.search.min.0698a0af23c7558f008b273fc6213934a3f35e45907b7ce3bfeefd15788363e0.js integrity="sha256-BpigryPHVY8Aiyc/xiE5NKPzXkWQe3zjv+79FXiDY+A="></script></head><body><input type=checkbox class=hidden id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav><style>hr{border:0;height:3px;background-image:linear-gradient(to right,transparent,#095484,transparent)}</style><h2 class=book-brand><a href=http://um-grex.github.io/grex-docs><img src=/grex-docs/logo/um_logo_email_signature.png style=width:auto;height:auto alt=Logo><br><hr><span>Unofficial Grex User Guide</span><hr></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64><div class="book-search-spinner spinner hidden"></div><ul id=book-search-results></ul></div><hr><ul><li class=book-section-flat><a href=/grex-docs/docs/longread/>Notes of Grex Changes</a><ul><li class=book-section-flat><a href=/grex-docs/docs/longread/training/>Training Materials and Presentations</a><ul></ul></li></ul></li><li class=book-section-flat><a href=/grex-docs/docs/computecanada/>Accessing Compute Canada resources</a><ul></ul></li><li class=book-section-flat><a href=/grex-docs/docs/grex/>Grex HPC QuickStart</a><ul><li><a href=/grex-docs/docs/grex/access/>Access and Usage conditions</a></li><li><a href=/grex-docs/docs/grex/connecting/>Connecting / Transferring data</a></li><li><a href=/grex-docs/docs/grex/data/>Storage and Data</a><ul><li><a href=/grex-docs/docs/grex/data/data-sharing/ class=active>Data Sharing</a></li><li><a href=/grex-docs/docs/grex/data/data-sizes-and-quota/>Data Sizes and Quota</a></li></ul></li><li><a href=/grex-docs/docs/grex/running/>Running Jobs</a></li><li><a href=/grex-docs/docs/grex/ood/>Grex's OpenOnDemand Web Portal</a></li><li><a href=/grex-docs/docs/grex/software/>Software</a></li></ul></li><li><a href=/grex-docs/docs/faq/>Frequently Asked Questions</a></li><li><a href=/grex-docs/docs/localit/>Local IT Resources</a></li><li><a href=/grex-docs/docs/support-contacts/>Support and Training</a></li><li><a href=/grex-docs/docs/disclaimer/>Disclaimer</a></li></ul></nav><script>(function(){var a=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></aside><div class=book-page><article class=markdown><h1 id=data-sharing>Data sharing</h1><p>Sharing of accounts login information (like passwords or SSH keys) is stricty forbidden on Grex, as well as on most of the HPC systems. There is a mechanism of data/file sharing that does not require sharing of the accounts. To access each others' data on Grex, the UNIX groups and permissions mechanism can be used as explined below.</p><h2 id=unix-groups>UNIX groups</h2><p>Each UNIX (or Linux) file or directory is owned by an individual user and also by a group (which may be comprised of several users). The permission to access files and directories can be restricted to just the individual owning the file, to the group that owns the file, or access can be unrestricted.</p><p>By default, each account (username) is set up with an associated UNIX group containing just that single username. So, even if you have set permission for your UNIX group to access files, they are still not being shared with anyone else. You can override the default by using the <strong>chmod</strong> command to set unrestricted read access to your files. However, if you need more specific control over access, you can ask us to create a special UNIX group containing the usernames of other researchers with whom you want to share data by sending an email to <a href=mailto:support@tech.alliancecan.ca>support</a>
to ask that a new UNIX group be created for you. Include a list of the users who should be added to that group. One user should be designated as the authority for the group. If a request to join the group is made from someone else, We will ask the designated authority for the permission to add the new researcher to the group. The group name must be of the format <strong>wg-xxxxx</strong> where <strong>xxxxx</strong> represents up to five characters. Please indicate your preference for a group name in your email.</p><p>The group will be set up on Grex system. This may take a day or two to set up. You will get an email whenever you are added or removed from a UNIX group.</p><p>Now that you have a <strong>wg-xxxxx</strong> UNIX group created, you can set up the data sharing with it, by setting the permissions as described below.</p><p>The directory you wish to share should be owned by the group and permitted to the group. For example:</p><blockquote class="book-hint info"><p>chgrp -R wg-group dir</p><p>chmod g+s dir</p></blockquote><p>You must ensure that there is access to parent directories as well.</p><p>A directory and all the files in it can be permitted to the group as follows:</p><blockquote class="book-hint info">chmod -R g+rX /global/scratch/dirname</blockquote><p>Tto set access for the /global/scratch/dirname directory and all its subdirectories. Note the uppercase X in the command. This will set x permissions on the subdirectories (needed for others to list the directories) as well as regular execute permission on executable files.</p><p>If you want the to allow other members to not only read files in the shared directory &ldquo;dir&rdquo;, but also permit write access to allow them to create and change files in that directory, then all members in the group must add a line:</p><blockquote class="book-hint info">umask 007</blockquote><p>to the <strong>~/.bashrc</strong> or <strong>~/.cshrc</strong> file in their respective home directories. Furthermore, you must add write permission to the shared directory itself:</p><blockquote class="book-hint info">chmod -R g+rwX dir</blockquote><p>which would allow read and write access to the directory dir and all its files and subdirectories.</p><h2 id=linux-acls>Linux ACLs</h2><p>On Lustre filesystem (<strong>/global/scratch/$USER</strong>), it is possible to use Linux access control lists (ACLs) which offer more fine-grained control over access than UNIX groups. Compute Canada&rsquo;s <a href=https://docs.alliancecan.ca/wiki/Sharing_data title="Sharing data" target=_blank rel=noopener>Sharing Data</a>
documentation might be relevant, with one caution: on Grex, there is no project layout as exists on Compute Canada clusters.</p><p>An example setting of ACL command, to allow for &ldquo;search&rdquo; access of the top directory to a group wg-abcdf, presumably with some of the directories under it being shared by a UNUX group:</p><blockquote class="book-hint info">setfacl -m g:wg-abcdf:X /global/scratch/$USER</blockquote><h2 id=related-links>Related links</h2><ul><li><p><a href=https://linuxize.com/post/understanding-linux-file-permissions/ title="Understanding Linux File Permissions" target=_blank rel=noopener>Linux permissions</a></p></li><li><p><a href=https://www.geeksforgeeks.org/access-control-listsacl-linux/ title="Access Control Lists in Linux" target=_blank rel=noopener>ACLs</a></p></li></ul></article><div class="book-footer justify-between"><div><a class="flex align-center" href=https://github.com/um-grex/grex-docs/commit/a737b5ffa648016a780b31dac8bff6d192844301 title="Last modified by Dr. Ali Kerrache | Jun 20, 2022" target=_blank><img src=/grex-docs/svg/calendar.svg class=book-icon alt=Calendar>
<span>Jun 20, 2022</span></a></div><div><a class="flex align-center" href=https://github.com/um-grex/grex-docs/blob/master/content/docs/grex/data/data-sharing.md target=_blank><img src=/grex-docs/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><br><hr></div><aside class="book-toc levels-4 fixed"><nav id=TableOfContents><ul><li><a href=#data-sharing>Data sharing</a><ul><li><a href=#unix-groups>UNIX groups</a></li><li><a href=#linux-acls>Linux ACLs</a></li><li><a href=#related-links>Related links</a></li></ul></li></ul></nav></aside></main></body></html>