<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Data Sharing"><meta property="og:title" content><meta property="og:description" content="Data sharing Sharing of accounts login information (like passwords or SSH keys) is stricty forbidden on Grex, as well as on most of the HPC systems. There is a mechanism of data/file sharing that does not require sharing of the accounts. To access each others' data on Grex, the UNIX groups and permissions mechanism can be used as explined below. We use a Westgrid exlpanation because Grex is still using Westgrid accounts and groups database, so the text below is still relevant."><meta property="og:type" content="article"><meta property="og:url" content="http://um-grex.github.io/grex-docs/docs/grex/data/data-sharing/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2021-06-29T07:58:23-05:00"><title>Data Sharing | Unofficial Grex User Guide</title><link rel=icon href=/grex-docs/favicon.png type=image/x-icon><link rel=stylesheet href=/grex-docs/book.min.9e24c4795dd4fdd0e504b497cfd7198ef04d9fc59147fe183e68ca7912ee2901.css integrity="sha256-niTEeV3U/dDlBLSXz9cZjvBNn8WRR/4YPmjKeRLuKQE="><script defer src=/grex-docs/en.search.min.94897e55ae3239cf8e80052bc21177bae56c7658d72570b5e44eb5578a1aa44a.js integrity="sha256-lIl+Va4yOc+OgAUrwhF3uuVsdljXJXC15E61V4oapEo="></script></head><body><input type=checkbox class=hidden id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav><h2 class=book-brand><a href=http://um-grex.github.io/grex-docs><img src=/grex-docs/um_logo_email_signature.png alt=Logo><span>Unofficial Grex User Guide</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64><div class="book-search-spinner spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><a href=/grex-docs/docs/longread/>Notes of Grex Changes</a><ul><li class=book-section-flat><a href=/grex-docs/docs/longread/training/>Training Materials and Presentations</a><ul></ul></li></ul></li><li class=book-section-flat><a href=/grex-docs/docs/computecanada/>Accessing Compute Canada resources</a><ul></ul></li><li class=book-section-flat><a href=/grex-docs/docs/grex/>Grex HPC Documentation</a><ul><li><a href=/grex-docs/docs/grex/access/>Access and Usage conditions</a></li><li><a href=/grex-docs/docs/grex/connecting/>Connecting / Transferring data</a></li><li><a href=/grex-docs/docs/grex/data/>Storage and Data</a><ul><li><a href=/grex-docs/docs/grex/data/data-sharing/ class=active>Data Sharing</a></li><li><a href=/grex-docs/docs/grex/data/data-sizes-and-quota/>Data Sizes and Quota</a></li></ul></li><li><a href=/grex-docs/docs/grex/running/>Running Jobs</a></li><li><a href=/grex-docs/docs/grex/software/>Software</a></li></ul></li><li><a href=/grex-docs/docs/faq/>Frequently Asked Questions</a></li><li><a href=/grex-docs/docs/localit/>Local IT Resources</a></li><li><a href=/grex-docs/docs/support-contacts/>Support and Training</a></li><li><a href=/grex-docs/docs/disclaimer/>Disclaimer</a></li></ul></nav><script>(function(){var a=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></aside><div class=book-page><header class="flex align-center justify-between book-header"><label for=menu-control><img src=/grex-docs/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Data Sharing</strong></header><article class=markdown><h1 id=data-sharing>Data sharing</h1><p>Sharing of accounts login information (like passwords or SSH keys) is stricty forbidden on Grex, as well as on most of the HPC systems. There is a mechanism of data/file sharing that does not require sharing of the accounts. To access each others' data on Grex, the UNIX groups and permissions mechanism can be used as explined below. We use a Westgrid exlpanation because Grex is still using Westgrid accounts and groups database, so the text below is still relevant.</p><h2 id=unix-groups>UNIX groups</h2><p>Each UNIX (or Linux) file or directory is owned by an individual user and also by a group (which may be comprised of several users). The permission to access files and directories can be restricted to just the individual owning the file, to the group that owns the file, or access can be unrestricted.</p><p>By default, each WestGrid account (username) is set up with an associated UNIX group containing just that single username. So, even if you have set permission for your UNIX group to access files, they are still not being shared with anyone else. You can override the default by using the chmod command to set unrestricted read access to your files. However, if you need more specific control over access, you can ask us to create a special UNIX group containing the usernames of other researchers with whom you want to share data by sending an email to WestGrid <a href=mailto:support@computecanada.ca>support</a> to ask that a new UNIX group be created for you. Include a list of the users who should be added to that group. One user should be designated as the authority for the group. If a request to join the group is made from someone else, WestGrid will ask the designated authority for the permission to add the new researcher to the group. The group name must be of the format wg-xxxxx where xxxxx represents up to five characters. Please indicate your preference for a group name in your email.</p><p>The group will be set up on all the WestGrid systems. This may take a day or two to set up. You will get an email whenever you are added or removed from a WestGrid UNIX group.</p><p>Now that you have a wg-xxxxx UNIX group created, you can set up the data sharing with it, by setting the permissions as described below.</p><p>The directory you wish to share should be owned by the group and permitted to the group. For example:</p><p><code>chgrp -R wg-group dir</code></p><p><code>chmod g+s dir</code></p><p>You must ensure that there is access to parent directories as well.</p><p>A directory and all the files in it can be permitted to the group as follows:</p><p><code>chmod -R g+rX /global/scratch/dirname</code></p><p>Tto set access for the /global/scratch/dirname directory and all its subdirectories. Note the uppercase X in the command. This will set x permissions on the subdirectories (needed for others to list the directories) as well as regular execute permission on executable files.</p><p>If you want the to allow other members to not only read files in the shared directory &ldquo;dir&rdquo;, but also permit write access to allow them to create and change files in that directory, then all members in the group must add a line:</p><p><code>umask 007</code></p><p>to the <em>.bashrc</em> or <em>.cshrc</em> file in their respective home directories. Furthermore, you must add write permission to the shared directory itself:</p><p><code>chmod -R g+rwX dir</code></p><p>which would allow read and write access to the directory dir and all its files and subdirectories.</p><h2 id=linux-acls>Linux ACLs</h2><p>On Lustre filesystem (<em>/global/scratch/$USER</em>) it is possible to use Linux access control lists (ACLs) which offer more fine-grained control over access than UNIX groups.
ComputeCanada&rsquo;s <a href=https://docs.computecanada.ca/wiki/Sharing_data>Sharing Data</a> documentation might be relevant, with one caution: on Grex, there is no project layout as exists on ComputeCanada.</p><p>An example setting of ACL command, to allow for &ldquo;search&rdquo; access of the top directory to a group wg-abcdf, presumably with some of the directories under it being shared by a UNUX group:</p><p><code>setfacl -m g:wg-abcdf:X /global/scratch/$USER</code></p></article><div class="book-footer justify-between"><div><a class="flex align-center" href=https://github.com/um-grex/grex-docs/commit/f42cd442db68ea019509b0aa26c742457dd13f71 title="Last modified by Shamov | Jun 29, 2021" target=_blank><img src=/grex-docs/svg/calendar.svg class=book-icon alt=Calendar>
<span>Jun 29, 2021</span></a></div><div><a class="flex align-center" href=https://github.com/um-grex/grex-docs/blob/master/content/docs/grex/data/data-sharing.md target=_blank><img src=/grex-docs/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div></div><aside class="book-toc levels-4 fixed"><nav id=TableOfContents><ul><li><a href=#data-sharing>Data sharing</a><ul><li><a href=#unix-groups>UNIX groups</a></li><li><a href=#linux-acls>Linux ACLs</a></li></ul></li></ul></nav></aside></main></body></html>