<!doctype html><html><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=generator content="Hugo 0.146.6"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Everything you need to know before to use Singularity containers"><title>Containers for Software | Grex</title>
<link rel=icon href=/grex-docs/logo/um_logo_vertical.png type=image/x-icon><link rel=stylesheet rel=preload type=text/css href=/grex-docs/css/main.css><link rel=stylesheet type=text/css href=/grex-docs/css/external/fontawesome.all.min.css><link rel=stylesheet type=text/css href></head><body onload=browserCompatibility()><div id=navbarInfo class="is-hidden modal-container"><div class="modal-content-box modal-text-box"><div class="card modal-title is-radiusless"><div class=card-header><p class="card-header-title is-marginless">About</p></div></div><div class=modal-content-container><div class="modal-content-block is-block"><div class='columns is-marginless is-multiline is-centered'><div class=column><a class=is-itext-link href=https://github.com/um-grex/grex-docs target=_blank><div><i class='fa-brands fa-github fa-2x'></i><p>GitHub repository</p></div></a></div><div class=column><a class=is-itext-link href=https://github.com/um-grex/grex-docs/archive/refs/heads/main.zip target=_blank><div><i class='fa-solid fa-download fa-2x'></i><p>Download</p></div></a></div><div class=column><a class=is-itext-link href=https://github.com/um-grex/grex-docs/issues target=_blank><div><i class='fa-solid fa-circle-info fa-2x'></i><p>Report an issue</p></div></a></div><div class=column><a class=is-itext-link href=https://github.com/um-grex/grex-docs/forks target=_blank><div><i class='fa-solid fa-code-branch fa-2x'></i><p>Fork</p></div></a></div></div><p>Website built with <a href=https://gohugo.io/ class=is-pretty-link>Hugo</a> (0.146.6)</p><p>The MIT License (MIT) Copyright © 2023 UM-Grex ()</p></div></div></div></div><div id=navbarShortcuts class="is-hidden modal-container"><div class="modal-content-box modal-text-box"><div class="card modal-title is-radiusless"><div class=card-header><p class="card-header-title is-marginless">Keyboard shortcuts</p></div></div><div class=modal-content-container><div class=modal-content-block><div class=modal-content><kbd>Shift</kbd><p>+</p><kbd>q</kbd></div><div class=modal-content><p class=has-text-weight-normal>Show current page QR code</p></div><div class=modal-content><kbd>Escape</kbd></div><div class=modal-content><p class=has-text-weight-normal>Close modals</p></div><div class=modal-content><kbd>Shift</kbd><p>+</p><kbd>i</kbd></div><div class=modal-content><p class=has-text-weight-normal>Show website information</p></div><div class=modal-content><kbd>Shift</kbd><p>+</p><kbd>k</kbd></div><div class=modal-content><p class=has-text-weight-normal>Show shortcuts</p></div><div class=modal-content><kbd>Shift</kbd><p>+</p><kbd>h</kbd></div><div class=modal-content><p class=has-text-weight-normal>Go to homepage</p></div><div class=modal-content><kbd>Shift</kbd><p>+</p><kbd>f</kbd></div><div class=modal-content><p class=has-text-weight-normal>Find on website</p></div><div class=modal-content><kbd>Shift</kbd><p>+</p><kbd>m</kbd></div><div class=modal-content><p class=has-text-weight-normal>Collapse/Uncollapse sidebar</p></div><div class=modal-content><kbd>Shift</kbd><p>+</p><kbd>t</kbd></div><div class=modal-content><p class=has-text-weight-normal>Collapse/Uncollapse table of contents</p></div><div class=modal-content><kbd>Shift</kbd><p>+</p><kbd>↑</kbd></div><div class=modal-content><p class=has-text-weight-normal>Go to the top of the page</p></div><div class=modal-content><kbd>Shift</kbd><p>+</p><kbd>↓</kbd></div><div class=modal-content><p class=has-text-weight-normal>Go to the bottom of the page</p></div><div class=modal-content><kbd>Shift</kbd><p>+</p><kbd>p</kbd></div><div class=modal-content><p class=has-text-weight-normal>Print current page</p></div></div></div></div></div><div id=modalContainer class="is-hidden modal-container"><div id=modal class=modal-content-box></div></div><nav id=navbar class=navbar role=navigation aria-label="main navigation"><div id=navbarItemsContainer class=navbar-brand><div id=globalLogoContainer class=is-flex><a id=globalLogo class="navbar-item navbar-item-standard is-paddingless" href=/grex-docs/><img alt=Homepage src=/grex-docs/logo/um_logo_email_signature.png>
</a><a id=globalTouchLogo class="navbar-item navbar-item-standard is-paddingless" href=/grex-docs/><img alt=Homepage src=/grex-docs/logo/um_logo_email_signature.png></a></div><div id=navbarItems class=is-flex><div id=navbarItemsStart class=is-flex><div id=searchContainer class=navbar-item><div class="control has-icons-left"><span id=searchInput class=autocomplete><input id=search autocomplete=off class=input type=search placeholder=Search>
</span><span class="icon is-left"><i class="fa-solid fa-magnifying-glass"></i></span><ul id=searchList class="is-paddingless is-hidden"></ul></div></div></div><div id=navbarItemsEnd class="is-flex is-invisible"><div class=navbar-item><a id=printButton class="button navbar-item-standard"><span class=icon-text>Print</span>
<span class=icon><i class="fa-solid fa-print fa-lg"></i></span></a></div><div class=navbar-item><a id=qrCodeButton class="button navbar-item-standard"><span class=icon-text>QR code</span>
<span class=icon><i class="fa-solid fa-qrcode fa-lg"></i></span></a></div><div class=navbar-item><a id=shortcutsInfo trigger=navbarShortcuts class="button navbar-item-standard navbar-trigger" title="Keyboard shortcuts"><span class=icon-text>Shortcuts</span>
<span class=icon><i class="fa-solid fa-keyboard fa-lg"></i></span></a></div><div class=navbar-item><div id=taxonomiesSelectorContainer class="dropdown is-right"><div class=dropdown-trigger><button id=taxonomiesSelector class="button navbar-item-standard" aria-haspopup=true aria-controls=dropdown-menu>
<span class=icon-text>Taxonomies</span>
<span class=icon><i class="fa-solid fa-tags fa-lg"></i></span></button></div><div id=dropdown-menu-taxonomies class=dropdown-menu role=menu><div class="dropdown-content is-paddingless"><a href=/grex-docs/categories/ class="dropdown-item has-text-weight-bold">Categories</a><a href=/grex-docs/tags/ class="dropdown-item has-text-weight-bold">Tags</a></div></div></div></div><div class=navbar-item><a id=siteInfo trigger=navbarInfo class="button navbar-item-standard navbar-trigger" title=About><span class=icon-text>About</span>
<span class=icon><i class="fa-solid fa-circle-question fa-lg"></i></span></a></div><div id=navbarExtend class=navbar-item><div id=navbarExtendWrapper><a id=navbarExtendButton class="button navbar-item-standard"><span class=icon><i class="fa-solid fa-ellipsis fa-lg"></i></span></a><div id=navbarExtendItemsContainer><div id=navbarExtendItemsWrapper><div class=navbar-item><a id=printButtonExtend class="button navbar-item-standard"><span class=icon-text>Print</span>
<span class=icon><i class="fa-solid fa-print fa-lg"></i></span></a></div><div class=navbar-item><a id=qrCodeButtonExtend class="button navbar-item-standard"><span class=icon-text>QR code</span>
<span class=icon><i class="fa-solid fa-qrcode fa-lg"></i></span></a></div><div class=navbar-item><a id=shortcutsInfoExtend trigger=navbarShortcuts class="button navbar-item-standard navbar-trigger" title="Keyboard shortcuts"><span class=icon-text>Shortcuts</span>
<span class=icon><i class="fa-solid fa-keyboard fa-lg"></i></span></a></div><div class=navbar-item><div id=taxonomiesSelectorContainerExtend class="dropdown is-right"><div class=dropdown-trigger><button id=taxonomiesSelectorExtend class="button navbar-item-standard" aria-haspopup=true aria-controls=dropdown-menu>
<span class=icon-text>Taxonomies</span>
<span class=icon><i class="fa-solid fa-tags fa-lg"></i></span></button></div><div id=dropdown-menu-taxonomiesExtend class=dropdown-menu role=menu><div class="dropdown-content is-paddingless"><a href=/grex-docs/categories/ class="dropdown-item has-text-weight-bold">Categories</a><a href=/grex-docs/tags/ class="dropdown-item has-text-weight-bold">Tags</a></div></div></div></div><div class=navbar-item><a id=siteInfoExtend trigger=navbarInfo class="button navbar-item-standard navbar-trigger" title=About><span class=icon-text>About</span>
<span class=icon><i class="fa-solid fa-circle-question fa-lg"></i></span></a></div></div></div></div></div></div></div></div></nav><div id=navbarOverlay></div><div class="columns is-mobile is-paddingless is-marginless" id=mainContainer><div id=sidebarContainer class="column is-narrow is-paddingless is-marginless"><div id=sidebarWrapper class=is-fixed><div id=sidebar class=is-marginless><aside class="menu is-paddingless is-marginless"><ul class="menu-list is-marginless is-paddingless"><div class="card is-fs-expandable-icon"><div class="card-header is-single-link"><a href=/grex-docs/updates/ class=card-header-title><i class='fa-solid fa-house-chimney fa-lg'></i></a></div></div><div class=is-expandable><div class=is-sidebar-list-wrapper><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/updates/ class=card-header-title title='Grex Updates'><i class='fa-solid fa-house-chimney fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Grex Updates</p></a></div></div></li></div></div><div class="card is-fs-expandable-icon"><div class="card-header is-single-link"><a href=/grex-docs/grex/ class=card-header-title><i class='fa-solid fa-user-gear fa-lg'></i></a></div></div><div class=is-expandable><div class=is-sidebar-list-wrapper><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/grex/ class=card-header-title title=Home><i class='fa-solid fa-user-gear fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Home</p></a></div></div></li></div></div><div class="card is-fs-expandable-icon"><div class="card-header is-single-link"><a href=/grex-docs/start-guide/ class=card-header-title><i class='fa-solid fa-house-chimney fa-lg'></i></a></div></div><div class=is-expandable><div class=is-sidebar-list-wrapper><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/start-guide/ class=card-header-title title='Quick Start Guide'><i class='fa-solid fa-house-chimney fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Quick Start Guide</p></a></div></div></li></div></div><div class="card is-fs-expandable-icon"><div class="card-header is-single-link"><a href=/grex-docs/access/ class=card-header-title><i class='fa-solid fa-house-chimney fa-lg'></i></a></div></div><div class=is-expandable><div class=is-sidebar-list-wrapper><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/access/ class=card-header-title title='Access and usage conditions'><i class='fa-solid fa-house-chimney fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Access and usage conditions</p></a></div></div></li></div></div><div class="card is-fs-expandable-icon"><div class=card-header><a href=/grex-docs/connecting/ class=card-header-title><i class='fa-solid fa-house-chimney fa-lg'></i></a></div></div><div class=is-expandable><div class=is-sidebar-list-wrapper><li class="is-marginless is-entries-expandable is-entries-shrinked"><div class=card><div class=card-header><a href=/grex-docs/connecting/ class=card-header-title title='Connect / Transfer data'><i class='fa-solid fa-house-chimney fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Connect / Transfer data</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked"><span class=icon></span></a></div></div><ul class=is-marginless><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/connecting/mfa/ class=card-header-title title='Multi-Factor Authentication'><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Multi-Factor Authentication</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/connecting/ssh/ class=card-header-title title='Connecting with SSH'><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Connecting with SSH</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/connecting/ood/ class=card-header-title title='Connect with OOD'><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Connect with OOD</p></a></div></div></li></div></div><div><div><li class="is-marginless is-entries-expandable is-entries-shrinked"><div class=card><div class=card-header><a href=/grex-docs/connecting/data-transfer/ class=card-header-title title='Data transfer'><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Data transfer</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked"><span class=icon></span></a></div></div><ul class=is-marginless><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/connecting/data-transfer/globus/ class=card-header-title title='Globus on Grex '><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Globus on Grex</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/connecting/data-transfer/one-drive/ class=card-header-title title='Rclone and OneDrive'><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Rclone and OneDrive</p></a></div></div></li></div></div></ul></li></div></div></ul></li></div></div><div class="card is-fs-expandable-icon"><div class=card-header><a href=/grex-docs/storage/ class=card-header-title><i class='fa-solid fa-house-chimney fa-lg'></i></a></div></div><div class=is-expandable><div class=is-sidebar-list-wrapper><li class="is-marginless is-entries-expandable is-entries-shrinked"><div class=card><div class=card-header><a href=/grex-docs/storage/ class=card-header-title title='Storage and Data'><i class='fa-solid fa-house-chimney fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Storage and Data</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked"><span class=icon></span></a></div></div><ul class=is-marginless><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/storage/data-sizes-and-quota/ class=card-header-title title='Data sizes and Quotas'><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Data sizes and Quotas</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/storage/data-backup/ class=card-header-title title='Data Backup'><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Data Backup</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/storage/data-sharing/ class=card-header-title title='Data sharing'><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Data sharing</p></a></div></div></li></div></div></ul></li></div></div><div class="card is-fs-expandable-icon"><div class=card-header><a href=/grex-docs/running-jobs/ class=card-header-title><i class='fa-solid fa-house-chimney fa-lg'></i></a></div></div><div class=is-expandable><div class=is-sidebar-list-wrapper><li class="is-marginless is-entries-expandable is-entries-shrinked"><div class=card><div class=card-header><a href=/grex-docs/running-jobs/ class=card-header-title title='Running jobs'><i class='fa-solid fa-house-chimney fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Running jobs</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked"><span class=icon></span></a></div></div><ul class=is-marginless><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/running-jobs/slurm-partitions/ class=card-header-title title='Slurm partitions'><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Slurm partitions</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/running-jobs/interactive-jobs/ class=card-header-title title='Interactive jobs'><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Interactive jobs</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/running-jobs/batch-jobs/ class=card-header-title title='Batch jobs'><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Batch jobs</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/running-jobs/contributed-systems/ class=card-header-title title='Contributed nodes'><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Contributed nodes</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/running-jobs/using-localdisks/ class=card-header-title title='Using local disks'><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Using local disks</p></a></div></div></li></div></div></ul></li></div></div><div class="card is-fs-expandable-icon is-sidebar-active"><div class=card-header><a href=/grex-docs/software/ class=card-header-title><i class='fa-solid fa-house-chimney fa-lg'></i></a></div></div><div class=is-expandable><div class=is-sidebar-list-wrapper><li class="is-marginless is-tree-active is-entries-expandable is-entries-expanded"><div class=card><div class=card-header><a href=/grex-docs/software/ class=card-header-title title='Software / Applications'><i class='fa-solid fa-house-chimney fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Software / Applications</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-expanded"><span class=icon></span></a></div></div><ul class="is-marginless is-tree-active"><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/software/general-linux/ class=card-header-title title='Linux tools'><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Linux tools</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/software/using-modules/ class=card-header-title title='Using modules'><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Using modules</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/software/code-development/ class=card-header-title title='Code development'><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Code development</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class="card is-sidebar-active" id=sidebarActiveEntry><div class="card-header is-single-link"><a href=/grex-docs/software/containers/ class=card-header-title title=Containers><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Containers</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/software/cern-vmfs/ class=card-header-title title=CVMFS><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">CVMFS</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/software/software-list/ class=card-header-title title='List of Software'><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">List of Software</p></a></div></div></li></div></div></ul></li></div></div><div class="card is-fs-expandable-icon"><div class=card-header><a href=/grex-docs/specific-soft/ class=card-header-title><i class='fa-solid fa-house-chimney fa-lg'></i></a></div></div><div class=is-expandable><div class=is-sidebar-list-wrapper><li class="is-marginless is-entries-expandable is-entries-shrinked"><div class=card><div class=card-header><a href=/grex-docs/specific-soft/ class=card-header-title title='Software Specific Notes'><i class='fa-solid fa-house-chimney fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Software Specific Notes</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked"><span class=icon></span></a></div></div><ul class=is-marginless><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/specific-soft/espresso/ class=card-header-title title=Espresso><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Espresso</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/specific-soft/gaussian/ class=card-header-title title=Gaussian><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Gaussian</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/specific-soft/gromacs/ class=card-header-title title=GROMACS><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">GROMACS</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/specific-soft/julia/ class=card-header-title title=Julia><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Julia</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/specific-soft/jupyter-notebook/ class=card-header-title title='Jupyter notebooks'><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Jupyter notebooks</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/specific-soft/lammps/ class=card-header-title title=LAMMPS><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">LAMMPS</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/specific-soft/matlab/ class=card-header-title title=MATLAB><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">MATLAB</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/specific-soft/nwchem/ class=card-header-title title=NWChem><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">NWChem</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/specific-soft/orca/ class=card-header-title title=ORCA><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">ORCA</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/specific-soft/vasp/ class=card-header-title title=VASP><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">VASP</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/specific-soft/python-ai/ class=card-header-title title='Python for ML'><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Python for ML</p></a></div></div></li></div></div></ul></li></div></div><div class="card is-fs-expandable-icon"><div class="card-header is-single-link"><a href=/grex-docs/ood/ class=card-header-title><i class='fa-solid fa-house-chimney fa-lg'></i></a></div></div><div class=is-expandable><div class=is-sidebar-list-wrapper><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/ood/ class=card-header-title title=OpenOnDemand><i class='fa-solid fa-house-chimney fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">OpenOnDemand</p></a></div></div></li></div></div><div class="card is-fs-expandable-icon"><div class=card-header><a href=/grex-docs/changes/ class=card-header-title><i class='fa-solid fa-house-chimney fa-lg'></i></a></div></div><div class=is-expandable><div class=is-sidebar-list-wrapper><li class="is-marginless is-entries-expandable is-entries-shrinked"><div class=card><div class=card-header><a href=/grex-docs/changes/ class=card-header-title title='Grex changes'><i class='fa-solid fa-house-chimney fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Grex changes</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked"><span class=icon></span></a></div></div><ul class=is-marginless><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/changes/linux-slurm-update/ class=card-header-title title='Dec 10-11, 2019'><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Dec 10-11, 2019</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/changes/changes-before-2020/ class=card-header-title title='Before Dec, 2019'><i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Before Dec, 2019</p></a></div></div></li></div></div></ul></li></div></div><div class="card is-fs-expandable-icon"><div class="card-header is-single-link"><a href=/grex-docs/support/ class=card-header-title><i class='fa-solid fa-house-chimney fa-lg'></i></a></div></div><div class=is-expandable><div class=is-sidebar-list-wrapper><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/support/ class=card-header-title title='Getting Help'><i class='fa-solid fa-house-chimney fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Getting Help</p></a></div></div></li></div></div><div class="card is-fs-expandable-icon"><div class=card-header><a href=/grex-docs/training/ class=card-header-title><i class='fa-solid fa-house-chimney fa-lg'></i></a></div></div><div class=is-expandable><div class=is-sidebar-list-wrapper><li class="is-marginless is-entries-expandable is-entries-shrinked"><div class=card><div class=card-header><a href=/grex-docs/training/ class=card-header-title title=Workshops><i class='fa-solid fa-house-chimney fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Workshops</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked"><span class=icon></span></a></div></div><ul class=is-marginless><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/training/workshops-2024/ class=card-header-title title=2024><i class='fa-solid fa-cubes'></i><p class="pt-0 pb-0 pr-2 pl-0">2024</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/training/workshops-2023/ class=card-header-title title=2023><i class='fa-solid fa-cubes'></i><p class="pt-0 pb-0 pr-2 pl-0">2023</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/training/workshops-2022/ class=card-header-title title=2022><i class='fa-solid fa-cubes'></i><p class="pt-0 pb-0 pr-2 pl-0">2022</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/training/workshops-2021/ class=card-header-title title=2021><i class='fa-solid fa-cubes'></i><p class="pt-0 pb-0 pr-2 pl-0">2021</p></a></div></div></li></div></div></ul></li></div></div><div class="card is-fs-expandable-icon"><div class=card-header><a href=/grex-docs/friends/ class=card-header-title><i class='fa-solid fa-house-chimney fa-lg'></i></a></div></div><div class=is-expandable><div class=is-sidebar-list-wrapper><li class="is-marginless is-entries-expandable is-entries-shrinked"><div class=card><div class=card-header><a href=/grex-docs/friends/ class=card-header-title title='Friendly Organizations'><i class='fa-solid fa-house-chimney fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Friendly Organizations</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked"><span class=icon></span></a></div></div><ul class=is-marginless><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/friends/alliancecan/ class=card-header-title title='DRAC (Alliance)'><i class='fa-solid fa-house-chimney'></i><p class="pt-0 pb-0 pr-2 pl-0">DRAC (Alliance)</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/friends/localit/ class=card-header-title title='UManitoba IT resources'><i class='fa-solid fa-house-chimney'></i><p class="pt-0 pb-0 pr-2 pl-0">UManitoba IT resources</p></a></div></div></li></div></div></ul></li></div></div><div class="card is-fs-expandable-icon"><div class="card-header is-single-link"><a href=/grex-docs/faq/ class=card-header-title><i class='fa-solid fa-circle-question fa-lg'></i></a></div></div><div class=is-expandable><div class=is-sidebar-list-wrapper><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/faq/ class=card-header-title title=FAQ><i class='fa-solid fa-circle-question fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">FAQ</p></a></div></div></li></div></div><div class="card is-fs-expandable-icon"><div class="card-header is-single-link"><a href=/grex-docs/deprecated/ class=card-header-title><i class='fa-solid fa-ban fa-lg'></i></a></div></div><div class=is-expandable><div class=is-sidebar-list-wrapper><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/deprecated/ class=card-header-title title='Deprecated pages'><i class='fa-solid fa-ban fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Deprecated pages</p></a></div></div></li></div></div><div class="card is-fs-expandable-icon"><div class="card-header is-single-link"><a href=/grex-docs/disclaimer/ class=card-header-title><i class='fa-solid fa-ban fa-lg'></i></a></div></div><div class=is-expandable><div class=is-sidebar-list-wrapper><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/disclaimer/ class=card-header-title title=Disclaimer><i class='fa-solid fa-ban fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Disclaimer</p></a></div></div></li></div></div><div class="card is-fs-expandable-icon"><div class="card-header is-single-link"><a href=/grex-docs/glossary/ class=card-header-title><i class='fa-solid fa-sitemap fa-lg'></i></a></div></div><div class=is-expandable><div class=is-sidebar-list-wrapper><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/glossary/ class=card-header-title title=Glossary><i class='fa-solid fa-sitemap fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Glossary</p></a></div></div></li></div></div><div class="card is-fs-expandable-icon"><div class="card-header is-single-link"><a href=/grex-docs/sitemap/ class=card-header-title><i class='fa-solid fa-sitemap fa-lg'></i></a></div></div><div class=is-expandable><div class=is-sidebar-list-wrapper><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/grex-docs/sitemap/ class=card-header-title title=Sitemap><i class='fa-solid fa-sitemap fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Sitemap</p></a></div></div></li></div></div></ul></aside></div><div id=sidebarCollapsible class=is-marginless><div class="card is-uncollapse-action"><div id=sidebarUncollapse class="card-header is-single-link" title="Collapse/Uncollapse sidebar"><a class=card-header-title><i class="fa-solid fa-angles-right fa-lg"></i></a></div></div><div class="card is-collapse-action"><div id=sidebarCollapse class="card-header is-single-link" title="Collapse/Uncollapse sidebar"><a class=card-header-title><i class="fa-solid fa-angles-left fa-lg"></i><p>Collapse sidebar</p></a></div></div></div></div></div><div id=sidebarMobileWrapper class="column is-narrow is-hidden-desktop"></div><div class="columns is-mobile is-marginless is-scroll-smooth has-toc" id=contentContainer><div class=column id=content><div id=contentTitle>Containers for Software</div><h2 id=introduction>Introduction<a href=#introduction class=anchor>#</a></h2><hr><p>Linux Containers are means to isolate software dependencies from the base Linux operating system. Several different Linux container engines exist, most notably <a href=https://www.docker.com class=is-pretty-link>Docker</a>
which was first to emerge as the most popular tool in the DevOps community.</p><p>Since then, a lot of work had been done by major Linux players like Google, RedHat and others to develop an open standard for container runtimes, which developed based on Docker, <a href=https://opencontainers.org/ class=is-pretty-link>OCI</a>
.</p><p>There are HPC-specific container engines/runtimes that offer similar or equivalent functionality but allow for easier integration with shared Linux HPC systems. At the time of writing, the most widely used of them is the <a href=https://sylabs.io/guides/3.11/user-guide/ class=is-pretty-link>Singularity</a>
container system, developed by a company called SyLabs, and its fork, a Linux Foundation project called <a href=https://apptainer.org/ class=is-pretty-link>Apptainer</a>
.
They are <a href=https://apptainer.org/docs/user/latest/singularity_compatibility.html class=is-pretty-link>compatible</a>
with each other. Singularity/Apptainer provides functionality for running most Docker images by converting them to the Singularity Image format (SIF). However, Singularity/Apptainer own format is <a href=https://apptainer.org/docs/user/latest/docker_and_oci.html#differences-and-limitations-vs-docker class=is-pretty-link>not completely OCI-compatible</a>
, so there exists Docker images that would not work properly.</p><p>Finally, recent developments in Linux Kernel namespaces allowed to happen such projects as &ldquo;rootless Docker&rdquo; and &ldquo;rootless <a href=https://podman.io class=is-pretty-link>Podman</a>
&rdquo; which are more suitable for HPC systems than the original Docker implementation which requires privileged access to the Linux system.</p><p>On Grex, Sylabs Singularity-CE is supported on local SBEnv software stack, while Apptainer is supported as part of the ComputeCanada/Alliance CCEnv stack. At the time of writing, these engines can be used largely interchangeably.</p><blockquote><p>New: There is also support for rootless Podman on Grex, for the use cases that require full OCI-compatibility.</p></blockquote><h2 id=using-singularity-from-sbenv-on-grex>Using Singularity from SBEnv on Grex<a href=#using-singularity-from-sbenv-on-grex class=anchor>#</a></h2><hr><p>A brief introduction on <a href=https://docs.sylabs.io/guides/latest/user-guide/quick_start.html class=is-pretty-link>getting started with Singularity</a>
can be useful to get started. You will not need to install Singularity on Grex since it is already provided as a module.</p><p>Start with <strong>module spider singularity</strong>; it will list the current version. Due to the nature of container runtime environments, we update Singularity regularly, so the installed version is usually the latest one. Load the module (in the default Grex environment) by the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>module load singularity</span></span></code></pre></div><p>With <strong>singularity</strong> command, one can list singularity commands and their options:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>singularity help</span></span></code></pre></div><p>To execute an application within the container, do it in the usual way for that application, but prefix the command with <strong>singularity exec image_name.sif</strong> or, if the container has a valid <em>entry point</em>, execute it with <strong>singularity run image_name.sif</strong>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>singularity run docker://ghcr.io/apptainer/lolcow</span></span></code></pre></div><p>In the example above, Singularity downloads a Docker image from a registry, and runs it instantly. It is advisable, to avoid getting banned by container registries for massive downloads off a single HPC system, to &ldquo;pull&rdquo; or &ldquo;build&rdquo; containers first as images, and then &ldquo;run&rdquo; and &ldquo;exec&rdquo; them locally.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>singularity pull lolcow_local.sif docker://ghcr.io/apptainer/lolcow
</span></span><span style=display:flex><span><span style=color:#75715e># The above should create a local image lolcow_local.sif </span>
</span></span><span style=display:flex><span><span style=color:#75715e># Lets run it with singularity</span>
</span></span><span style=display:flex><span>singularity run lolcow_local.sif</span></span></code></pre></div><p>For another example, to run R on an R script, using an existing container image named R-INLA.sif (INLA is a popular R library installed in the container):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>singularity exec ./R-INLA.sif R --vanilla &lt; myscript.R</span></span></code></pre></div><p>Quite often, it is necessary to provide the containerized application with data residing outside of the container image. For running HPC jobs, the data usually resides on a shared filesystem such as <strong>/home</strong> or <strong>/project</strong>. This is done via <a href=https://docs.sylabs.io/guides/latest/user-guide/bind_paths_and_mounts.html class=is-pretty-link>bind mounts</a>
. Normally, the container <strong>bind-mounts</strong> $HOME, /tmp and the current working directory. It is possible to mount a subdirectory, such as <em>$PWD/workdir</em>, or an entire filesystem such as <em>/project</em>.
Example below bind-mounts a <strong>./workdir</strong> folder relative to the current path. The folder must exist before being bind-mounted.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>singularity exec -B <span style=color:#e6db74>`</span>pwd<span style=color:#e6db74>`</span>/workdir:/workdir ./R-INLA.sif R --vanilla &lt; myscript.R</span></span></code></pre></div><p>In case you do not want to mount anything to preserve the containers&rsquo; environment from any overlapping of data/code from say $HOME, use the <strong>--containall</strong> flag.</p><p>Some attention should be paid to Singularity&rsquo;s local cache and temporary directories. Singularity caches the container images it pulls and Docker layers under <strong>$HOME/.singularity</strong>. Containers can be large, in tens of gigabytes, and thus they can easily accumulate and exhaust the users&rsquo; storage space quota on $HOME. Thus, users might want to set the <strong>SINGULARITY_CACHEDIR</strong> and <strong>SINGULARITY_TMPDIR</strong> variables to some place under their <strong>/global/scratch</strong> space.</p><p>For example, to change the location of <strong>SINGULARITY_CACHEDIR</strong> and <strong>SINGULARITY_TMPDIR</strong>, before building the singularity image, one might run:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir -p /global/scratch/$USER/singularity/<span style=color:#f92672>{</span>cache,tmp<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>export SINGULARITY_CACHEDIR<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/global/scratch/</span>$USER<span style=color:#e6db74>/singularity/cache&#34;</span>
</span></span><span style=display:flex><span>export SINGULARITY_TMPDIR<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/global/scratch/</span>$USER<span style=color:#e6db74>/singularity/tmp&#34;</span></span></span></code></pre></div><h3 id=getting-and-building-singularity-images>Getting and building Singularity images<a href=#getting-and-building-singularity-images class=anchor>#</a></h3><hr><p>The commands <strong>singularity build</strong> and/or <strong>singularity pull</strong> would get pre-built Singularity images from DockerHub, SingularityHub, or SyLabsCloud. “pulling” images does not require elevated permissions (that is, sudo). There are several kinds of container repositories from which containers can be pulled. These repositories are distinguished by the URI string (library://, docker://, oras://, etc.).
It is also possible to convert a local Podman image (using the oci-archive:// URI ) into a Singularity image. Refer to the Podman section of this document below.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>module load singularity
</span></span><span style=display:flex><span><span style=color:#75715e># Building Ubuntu image using Sylabs Library</span>
</span></span><span style=display:flex><span>singularity build ubuntu_latest0.sif library://ubuntu
</span></span><span style=display:flex><span><span style=color:#75715e># or using DockerHub, this will create ubuntu_latest.sif</span>
</span></span><span style=display:flex><span>singularity pull docker://ubuntu:latest
</span></span><span style=display:flex><span><span style=color:#75715e># or, using a local definition and --fakeroot option</span>
</span></span><span style=display:flex><span>singularity build --fakeroot My_HPC_container.sif Singularity.def
</span></span><span style=display:flex><span><span style=color:#75715e># or, using a suitable local OCI image from Podman</span>
</span></span><span style=display:flex><span>singularity build busybox.sif oci-archive://busybox.tar</span></span></code></pre></div><p>Singularity (SIF) images can also be built from other local images, local “sandbox” directories, and from recipes. A <a href=https://apptainer.org/docs/user/main/definition_files.html class=is-pretty-link>Singularity recipe or definition file</a>
is a text file that specifies the base image and post-install commands to be performed on it. However, Singularity-CE requires <em>sudo</em> (privileged) access to build images from recipes, which is not available for users of HPC machines. There are two solutions to this problem.</p><ul><li>Using remote build on Sylabs cloud with <em>--remote</em> option. This requires <a href=https://cloud.sylabs.io/builder class=is-pretty-link>setting up a free account on Sylabs and getting access key</a>
.</li><li>Using Singularity-CE or Apptainer (see below) with <em>--fakeroot</em> option.</li></ul><blockquote><p>Make sure you understand licensing and intellectual property implications before using remote build services!</p></blockquote><p>The <em>fakeroot</em> method appears to be easier and does not require an external account. As of the time of writing, both Apptainer and Singularity-CE support the <em>fakeroot</em> build method. On Grex, there could be differencences between running Apptainer <em>build</em> in an interactive job and on a login node. Running builds in a <em>salloc</em> job is preferred also because login nodes do limit memory and CPU per session.</p><h3 id=singularity-with-gpus>Singularity with GPUs<a href=#singularity-with-gpus class=anchor>#</a></h3><hr><p>Add the <strong>--nv</strong> flag to <strong>singularity</strong> <em>run</em> / <em>exec</em> / <em>shell</em> commands for the container to be able to access NVidia GPU hardware.
Naturally, your job should be on a node that has a GPU to use GPUs . Check out our <a href=/grex-docs/running-jobs/slurm-partitions/ class=is-pretty-link>Running Jobs</a>
documentation to find out which partitions have the GPU hardware.
NVIDIA provides many pre-built Docker and Singularity container images on their <a href=https://ngc.nvidia.com/ class=is-pretty-link>GPU cloud</a>
, together with instructions on how to pull them and to run them. NVidia&rsquo;s NGC Docker images should, as a rule, work on HPC machines with Singularity without any changes.</p><h3 id=singularity-with-opensciencegrid-cvmfs>Singularity with OpenScienceGrid CVMFS<a href=#singularity-with-opensciencegrid-cvmfs class=anchor>#</a></h3><hr><p>We can run Singularity containers distributed with OSG CVMFS which is currently mounted on Grex&rsquo;s CVMFS. The containers are distributed via CVMFS as unpacked directory images. So, the way to access them is to find a directory of interest and point singularity runtime to it. The directories will then be mounted and fetched automatically. The repository starts with <strong>/cvmfs/singularity.opensciencegrid.org/</strong>. Then you&rsquo;d need an idea from somewhere what you are looking for in the subdirectories of the above-mentioned path. An example (accessing, that is, exploring via <strong>singularity shell</strong> command, Remoll software distributed through OSG CVMFS by <strong>jeffersonlab</strong>):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>module load singularity
</span></span><span style=display:flex><span>singularity shell /cvmfs/singularity.opensciencegrid.org/jeffersonlab/remoll<span style=color:#ae81ff>\:</span>develop</span></span></code></pre></div><p>It looks like the list of what is present on the OSG CVMFS is on GitHub: <a href=https://github.com/opensciencegrid/cvmfs-singularity-sync/blob/master/docker_images.txt class=is-pretty-link>OSG GitHub docker images</a>
.</p><h2 id=using-apptainer-from-ccenv-on-grex>Using Apptainer from CCEnv on Grex<a href=#using-apptainer-from-ccenv-on-grex class=anchor>#</a></h2><hr><p>The Alliance&rsquo;s (formerly ComputeCanada) software stack now provides Apptainer modules in the two latest Standard Environments, <em>StdEnv/2020</em> and <em>StdEnv/2023</em>. Most recent Apptainer versions (1.2.4 and older) do not require &ldquo;suexec&rdquo; and thus can be used off the CVMFS as usual. The only caveat would be to first unload any &ldquo;singularity&rdquo; or &ldquo;apptainer&rdquo; modules from other software stacks by <em>module purge</em>. Apptainer on the CCEnv stack is installed in suid-less mode.</p><p>The following commands show how to run the image from the previous example <em>/R-INLA.sif</em>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>module purge
</span></span><span style=display:flex><span>module load CCEnv
</span></span><span style=display:flex><span>module load arch/avx512 
</span></span><span style=display:flex><span>module load StdEnv/2023
</span></span><span style=display:flex><span>module load apptainer
</span></span><span style=display:flex><span><span style=color:#75715e># testing if apptainer command works</span>
</span></span><span style=display:flex><span>apptainer version
</span></span><span style=display:flex><span><span style=color:#75715e># running the basic example</span>
</span></span><span style=display:flex><span>apptainer run docker://ghcr.io/apptainer/lolcow</span></span></code></pre></div><p>Similarly to Singularity, you will need to bind mount the required data directories for accessing data outside the container.
The same best practices mentioned above for Singularity (pulling containers beforehand, controlling the cache location) equally apply for the Apptainer. The environment variables for Apptainer should be using APPTAINER_ instead of SINGULARITY_ prefixes.</p><h3 id=building-apptainer-images-with-fakeroot>Building apptainer images with &ldquo;fakeroot&rdquo;<a href=#building-apptainer-images-with-fakeroot class=anchor>#</a></h3><p>Apptainer supports building of SIF images from recipes without <strong>sudo</strong> access using <strong>--fakeroot</strong> option where available.</p><p>On Grex, it can be used as in the following example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>module purge
</span></span><span style=display:flex><span>module load CCEnv
</span></span><span style=display:flex><span>module load StdEnv/2023
</span></span><span style=display:flex><span>module load apptainer
</span></span><span style=display:flex><span><span style=color:#75715e># testing if apptainer command works</span>
</span></span><span style=display:flex><span>apptainer version
</span></span><span style=display:flex><span><span style=color:#75715e># build an image, INLA, from a local Singularity.def recipe</span>
</span></span><span style=display:flex><span><span style=color:#75715e># --fakeroot makes the build possible without elevated access</span>
</span></span><span style=display:flex><span>apptainer build --fakeroot INLA.sif Singularity.def</span></span></code></pre></div><p>The resulting SIF image should be compatible with either Singularity-CE or Apptainer runtimes.</p><h2 id=using-podman-from-sbenv-on-grex>Using Podman from SBEnv on Grex<a href=#using-podman-from-sbenv-on-grex class=anchor>#</a></h2><hr><p><a href=https://podman.io/ class=is-pretty-link>Podman</a>
modules are now provided under the default Grex SBEnv environment. On Grex, Podman is configured as <em>rootless</em>. Podman is meant to be used by experienced users for jobs that cannot be executed as regular binaries, or through Singularity due to OCI requirements. Grex is an HPC systems, so it is expected that users would be using Podman to run compute jobs rather than persistent services (including and not limited to databases, and network services). Thus, Podman jobs and/or running Podman containers that deemed to be inappropriate for HPC may be terminated without notice.</p><blockquote><p>It is not recommended to run Podman on login nodes; it should be run only on compute nodes (e.g. using <strong>sbatch</strong> or <strong>salloc</strong>).</p></blockquote><p>The only allowed use on login nodes is to pull images before actually starting a job.</p><p>Access to the Podman runtime is through a module. Due to the nature of the container runtime environment, we strive to update Podman regularly, so in most cases, the latest installed version must be used:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>module load podman
</span></span><span style=display:flex><span>podman version
</span></span><span style=display:flex><span>podman run --rm docker.io/godlovedc/lolcow</span></span></code></pre></div><p>The above command would pull a container image and run it.</p><h3 id=getting-and-managing-podman-images>Getting and Managing Podman images<a href=#getting-and-managing-podman-images class=anchor>#</a></h3><hr><p>When using Podman to run a job, we suggest to manually pre-download the required image to avoid wasting time during the job.
Grex is hosting a Docker Registry proxy/cache locally to improve the download performance, and for avoiding rate limits that can be imposed by various container registries.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>module load podman
</span></span><span style=display:flex><span>podman pull &lt;REQUIRED_IMAGE&gt;</span></span></code></pre></div><p>The command <strong>podman pull <em>image_name</em></strong> would get Podman images from a container registry.</p><p>Images can also be built from other images, or from containerfiles (e.g. Dockerfiles) using the command <strong>podman build <em>Containerfile</em></strong>.
A <em>containerfile</em> is a text &ldquo;recipe&rdquo; that specifies the base image and commands to be run on it. Podman&rsquo;s recipes are compatible with Docker&rsquo;s <em>Dockerfiles</em>.
Below is an example of building a container from a source tree of a package called Chemprop. The Dockerfile is provided by the authors.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Lets try to build a local container from chemprop source directory</span>
</span></span><span style=display:flex><span>module load podman
</span></span><span style=display:flex><span><span style=color:#75715e># change the directory to the source tree where Dockerfile is located</span>
</span></span><span style=display:flex><span>cd chemprop-1.7.1
</span></span><span style=display:flex><span>podman  build -t chemprop .
</span></span><span style=display:flex><span><span style=color:#75715e># this creates a local container image &#34;localhost/chemprop  latest&#34;</span></span></span></code></pre></div><blockquote><p>Podman, as configured on Grex, by default stores all pulled and locally built images inside the Slurm TMPDIR directory that is local to the node. This means that images will be deleted when the job finishes or get cancelled.</p></blockquote><p>To list the local <em>images</em>, users can take advantage of the following Podman commands:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># list images</span>
</span></span><span style=display:flex><span>podman image ls
</span></span><span style=display:flex><span><span style=color:#75715e># delete an unnecessary image</span>
</span></span><span style=display:flex><span>podman image rm &lt;IMAGE_ID&gt;</span></span></code></pre></div><p>However, the local images as listed by <em>image ls</em> are local to the compute node they were pulled or created. That is, they are not visible on other nodes, or even the same node when the job ends, and would have to be pulled again or built again from the Containerfile.</p><p>To avoid rebuilding the same image every time the job runs, users can take advantage of <strong>podman save</strong> and <strong>podman load</strong> commands that allow for storing the local container as a single image file. Note that these files are large, and it is the user&rsquo;s responsibility to manage their Podman images (delete the old/unused ones)):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># after building an image locally, save it to a file</span>
</span></span><span style=display:flex><span>podman save --format<span style=color:#f92672>=</span>oci-archive -o <span style=color:#e6db74>${</span>HOME<span style=color:#e6db74>}</span>/my-local-image.tar &lt;LOCALLY_BUILT_IMAGE&gt;
</span></span><span style=display:flex><span><span style=color:#75715e># when running a job that needs that image, load it</span>
</span></span><span style=display:flex><span>podman load -i <span style=color:#e6db74>${</span>HOME<span style=color:#e6db74>}</span>/my-local-image.tar</span></span></code></pre></div><p>Note that it is also possible to convert podman OCI archives into Singularity <em>.sif</em> images as described above, using <em>oci-archive://my-local-image.tar</em> syntax for the source image.</p><h3 id=podman-with-user-namespaces>Podman with User Namespaces<a href=#podman-with-user-namespaces class=anchor>#</a></h3><p>OCI containers may contain multiple users in the container. For example, a Jupyter container would have the <em>jovian</em> user, a Mambaforge container would have the user <em>mambauser</em>, etc., in addition to the <em>root</em> user inside container. To properly run such contains with rootless Podman on HPC, an explicit switch <strong>--userns=keepid</strong> with corresponding userID and groupID mappings has to be provided to Podman.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># run a container with userID mapping for a user with id 1000</span>
</span></span><span style=display:flex><span><span style=color:#75715e># while binding the home directory of the &#34;outside&#34; user</span>
</span></span><span style=display:flex><span>podman run -it --userns<span style=color:#f92672>=</span>keep-id:uid<span style=color:#f92672>=</span>1000,gid<span style=color:#f92672>=</span><span style=color:#ae81ff>1000</span> -v <span style=color:#e6db74>${</span>HOME<span style=color:#e6db74>}</span>:<span style=color:#e6db74>${</span>HOME<span style=color:#e6db74>}</span> &lt;REQUIRED_IMAGE&gt;</span></span></code></pre></div><p>Since the user and group ID in arbitrary containers are not known <em>a priori</em>, it is sometimes needed to use the <em>id</em> command when running the container to get the user and group IDs first.</p><p>Please refer to the Podman documentation on <a href=https://docs.podman.io/en/v4.4/markdown/options/userns.container.html class=is-pretty-link>User namespace options</a>
for more information.</p><p>Namespaces <a href=https://www.redhat.com/en/blog/supplemental-groups-podman-containers class=is-pretty-link>may cause issues</a>
when bind-mounting folders not owned by the user&rsquo;s primary group. Unfortunately, such folders are all the folders of the sponsored users on the <em>/project</em> filesystems, that require access to supplemental groups to be accessible.
If you encounter such issues when using containers with <strong>--keep-id</strong>, please add <strong>--annotation run.oci.keep_original_groups=1</strong> to the <em>podman</em> command line options.</p><h3 id=podman-with-gpus>Podman with GPUs<a href=#podman-with-gpus class=anchor>#</a></h3><hr><p>Use the <strong>--device=nvidia.com/gpu=all</strong> flag to the <em>podman</em> command when running a podman container that needs GPU hardware.
Naturally, your job should be on a node that has a GPU to use GPUs . Check out our <a href=/grex-docs/running-jobs/slurm-partitions/ class=is-pretty-link>Running Jobs</a>
documentation to find out which partitions have the GPU hardware.
NVIDIA provides many pre-built Docker container images on their <a href=https://ngc.nvidia.com/ class=is-pretty-link>NGC Cloud</a>
, together with instructions on how to pull and run them.
Many software developers also put images to various container registries, such as DockerHub or Quay.io, or distribute the sources of containers along with Dockerfiles; all these can be used, but &ldquo;your mileage may vary&rdquo;.
Podman would usually run Docker containers without changes to the command line parameters.
It is a good idea to run a test job for a given container and use <strong>nvidia-smi</strong> command on the node the job runs on to check whether the image is able to utilize the GPU(s).</p><hr><h2 id=external-links>External links<a href=#external-links class=anchor>#</a></h2><hr><ul><li><a href=https://sylabs.io class=is-pretty-link>Singularity/Sylabs homepage</a></li><li><a href=https://apptainer.org/ class=is-pretty-link>Apptainer homepage</a></li><li><a href=https://podman.io/ class=is-pretty-link>Podman homepage</a></li><li><a href=https://docs.alliancecan.ca/wiki/Apptainer class=is-pretty-link>Apptainer documentation on the Alliance Wiki</a></li><li><a href=https://hub.docker.com class=is-pretty-link>Docker Hub</a></li><li><a href=https://quay.io/search class=is-pretty-link>RedHat Quay.io Hub</a></li><li><a href=https://cloud.sylabs.io/builder class=is-pretty-link>Sylabs Cloud</a></li><li><a href=https://ngc.nvidia.com/ class=is-pretty-link>NVIDIA NGC Cloud</a></li></ul></div><div class="column is-sticky is-paddingless" id=tocWrapper><div class=is-paddingless id=tocContainer><div class=toc-header><h6 class="toc-title is-marginless">On this page:</h6><i title="Back to top" id=tocBackToTop class="fa-solid fa-circle-arrow-up"></i></div><div id=tocContent><div id=toc><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#using-singularity-from-sbenv-on-grex>Using Singularity from SBEnv on Grex</a><ul><li><a href=#getting-and-building-singularity-images>Getting and building Singularity images</a></li><li><a href=#singularity-with-gpus>Singularity with GPUs</a></li><li><a href=#singularity-with-opensciencegrid-cvmfs>Singularity with OpenScienceGrid CVMFS</a></li></ul></li><li><a href=#using-apptainer-from-ccenv-on-grex>Using Apptainer from CCEnv on Grex</a><ul><li><a href=#building-apptainer-images-with-fakeroot>Building apptainer images with &ldquo;fakeroot&rdquo;</a></li></ul></li><li><a href=#using-podman-from-sbenv-on-grex>Using Podman from SBEnv on Grex</a><ul><li><a href=#getting-and-managing-podman-images>Getting and Managing Podman images</a></li><li><a href=#podman-with-user-namespaces>Podman with User Namespaces</a></li><li><a href=#podman-with-gpus>Podman with GPUs</a></li></ul></li><li><a href=#external-links>External links</a></li></ul></nav></div><div id=taxonomies><div class=taxonomy-wrapper><div class=toc-header><h6 class="toc-title is-marginless">Categories</h6></div><a href=/grex-docs/categories/software/ class=taxonomy><i class="fa-solid fa-circle-dot"></i>Software</a><a href=/grex-docs/categories/applications/ class=taxonomy><i class="fa-solid fa-circle-dot"></i>Applications</a></div><div class=taxonomy-wrapper></div></div></div></div><div class=is-paddingless id=tocCollapsible title="Collapse/Uncollapse table of contents"><i class="fa-solid fa-angles-right fa-lg"></i></div></div></div></div><script type=text/javascript>const baseUrl="https://um-grex.github.io/grex-docs/",codeCopyBefore="Copy to clipboard",codeCopyAfter="Copied to clipboard",svgDownloadLabel="Download as SVG",helperLoadingLabel="Loading",searchNoResults="No result found",introNextLabel="Next",introPrevLabel="Previous",introSkipLabel="✗",introDoneLabel="Done",printLabel="Print current page",qrCodeLabel="Show current page QR code",naCommonLabel="Not available"</script><script type=module src=/grex-docs/js/theme/modules/const.min.js></script><script type=module src=/grex-docs/js/theme/modules/helpers.min.js></script><script type=module src=/grex-docs/js/theme/modules/helpersGlobal.min.js></script><script type=module src=/grex-docs/js/theme/init.min.js></script><script type=module src=/grex-docs/js/theme/navbar.min.js></script><script type=module src=/grex-docs/js/theme/print.min.js></script><script type=module src=/grex-docs/js/theme/qrcode.min.js></script><script type=module src=/grex-docs/js/theme/search.min.js></script><script type=module src=/grex-docs/js/theme/shortcuts.min.js></script><script type=module src=/grex-docs/js/theme/sidebar.min.js></script><script type=module src=/grex-docs/js/theme/toc.min.js></script><script type=module src=/grex-docs/js/shortcodes/treeview.min.js></script><script type=text/javascript src=/grex-docs/js/theme/browserCompatibility.min.js></script><script type=text/javascript src=/grex-docs/js/external/flexsearch/flexsearch.bundle.min.js></script><script type=text/javascript src=/grex-docs/js/external/qrious/qrious.min.js></script><script type=text/javascript src=/grex-docs/js/external/overlay-scrollbars/overlayscrollbars.min.js></script></body></html>